<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="Русский">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <title>Настройка оборудования Рабочего Места Кассира &mdash; Перевод на русский язык документации Odoo 11.0</title>
    
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/accounting.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/prefixfree.min.js"></script>
    <script type="text/javascript" src="../../_static/atom.js"></script>
    <script type="text/javascript" src="../../_static/immutable.js"></script>
    <script type="text/javascript" src="../../_static/react.min.js"></script>
    <script type="text/javascript" src="../../_static/accounts.js"></script>
    <script type="text/javascript" src="../../_static/chart-of-accounts.js"></script>
    <script type="text/javascript" src="../../_static/entries.js"></script>
    <script type="text/javascript" src="../../_static/reconciliation.js"></script>
    <script type="text/javascript" src="../../_static/misc.js"></script>
    <script type="text/javascript" src="../../_static/inventory.js"></script>
    <script type="text/javascript" src="../../_static/coa-valuation.js"></script>
    <script type="text/javascript" src="../../_static/coa-valuation-continental.js"></script>
    <script type="text/javascript" src="../../_static/coa-valuation-anglo-saxon.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script type="text/javascript" src="../../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../../_static/doc.js"></script>
    <script type="text/javascript" src="../../_static/jquery.noconflict.js"></script>
    <script type="text/javascript" src="https://yastatic.net/es5-shims/0.0.2/es5-shims.min.js"></script>
    <script type="text/javascript" src="https://yastatic.net/share2/share.js"></script>
    <link rel="top" title="Перевод на русский язык документации Odoo 11.0" href="../../index.html" />
    <link rel="up" title="Общая информация" href="../overview.html" />
    <link rel="next" title="Register customers" href="register.html" />
    <link rel="prev" title="Приступая к работе на Рабочем Месте Кассира" href="start.html" /> 
  </head>
  <body role="document"><header class="o_main_header o_has_sub_nav o_inverted ">
    <div class="o_main_header_main">
      <a class="pull-left o_logo" href="/"></a>
      <a href="#" class="o_mobile_menu_toggle visible-xs-block pull-right">
        <span class="sr-only">Toggle navigation</span>
        <span class="mdi-navigation-menu"></span>
      </a>
      <ul class="o_primary_nav">
        <li><a href="/">Документация</a></li>
      </ul>
    </div>
    <nav class="navbar o_sub_nav">
      <div class="container">
        <div class="navbar-header visible-xs">
            <button type="button" class="navbar-toggle collapsed text-left btn-block" data-toggle="collapse" data-target="#o_sub-menu" aria-expanded="false">
              Меню
              <span class="mdi-hardware-keyboard-arrow-down pull-right"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="o_sub-menu">
          <ol class="o_breadcrumb breadcrumb nav navbar-left">
              
              
              





    
        
            
                <li><a href="../../index.html">Документация  (11.0)</a></li>
            
        
    
        
            
                
                    <li><a href="../../point_of_sale.html">Рабочее Место Кассира</a></li>
                
            
        
    
        
            
                
            
        
    
    <li class="active"><a href="#">Настройка оборудования Рабочего Места Кассира</a></li>

              
          </ol>

          <ul class="navbar-nav navbar-right nav o_sub_nav_actions">
            
              <li class="divider"></li>
            

            
             

<li class="languages dropdown">
    <a class="dropdown-toggle" href="#" data-toggle="dropdown">
        Русский
    </a>
    <ul class="dropdown-menu" role="menu">
        
            <li><a href="/user/11.0/en/point_of_sale/overview/setup.html">English</a></li>
        
    </ul>
</li>



<li class="versions dropdown">
    <a class="dropdown-toggle" href="#" data-toggle="dropdown">
        11.0
    </a>
    <ul class="dropdown-menu" role="menu">
        
            <li><a href="/user/9.0/ru/point_of_sale/overview/setup.html">9.0</a></li>
        
            <li><a href="/user/10.0/ru/point_of_sale/overview/setup.html">10.0</a></li>
        
    </ul>
</li>

            
          </ul>

          <ul class="nav navbar-nav navbar-right">
            
              <li class="divider"></li>
            

            
            

<li><a href="/user/11.0/ru/">Пользователю</a></li>
<li><a href="/developer/11.0/ru/">Разработчику</a></li>
<li><a href="/developer/11.0/ru/api_integration.html">API</a></li>
<li><a href="/developer/11.0/ru/setup/install.html">Установка</a></li>
            

            
              <li class="divider"></li>
            
          </ul>
        </div>
      </div>
    </nav>
  </header><div id="wrap" class="">
    
    <figure class="card top ">
      <span class="card-img" ></span>
      <div class="container text-center">
        <h1> Настройка оборудования Рабочего Места Кассира - Odoo 11.0 </h1>
      </div>
    </figure>
    
    
    
    <div class="container ">
      <main class="container-fluid ">
        
        <div class="row">
          
          <aside>
            <div class="navbar-aside text-center">
              <ul class="list-group text-left nav"><li class="list-group-item"><a href="#posbox-setup-guide" class="ripple internal reference">Руководство по настройке POSBox</a><ul ><li class="list-group-item"><a href="#prerequisites" class="ripple internal reference">Подготовка</a></li><li class="list-group-item"><a href="#step-by-step-setup-guide" class="ripple internal reference">Инструкция по установке</a><ul ><li class="list-group-item"><a href="#current-version-of-the-posbox-since-2015" class="ripple internal reference">Новая версия POSBox (после 2015 год)</a></li><li class="list-group-item"><a href="#connect-peripheral-devices" class="ripple internal reference">Подключите периферийные устройства</a></li><li class="list-group-item"><a href="#power-the-posbox" class="ripple internal reference">Питание для POSBox</a></li><li class="list-group-item"><a href="#make-sure-the-posbox-is-ready" class="ripple internal reference">Убедитесь, что POSBox готов</a></li><li class="list-group-item"><a href="#setup-the-point-of-sale" class="ripple internal reference">Настройка Рабочего Места Кассира</a></li><li class="list-group-item"><a href="#launch-the-point-of-sale" class="ripple internal reference">Запуск Рабочего Места Кассира</a></li></ul></li><li class="list-group-item"><a href="#wi-fi-configuration" class="ripple internal reference">Настройка Wi-Fi</a></li><li class="list-group-item"><a href="#multi-pos-configuration" class="ripple internal reference">Настройка нескольких РМК с одним POSBox</a></li></ul></li><li class="list-group-item"><a href="#posboxless-guide-advanced" class="ripple internal reference">Руководство по настройке РМК без POSBox (расширенное)</a><ul ><li class="list-group-item"><a href="#image-building-process" class="ripple internal reference">Процесс создания образа</a><ul ><li class="list-group-item"><a href="#summary-of-the-image-creation-process" class="ripple internal reference">Краткое описание процесса создания образа</a></li></ul></li><li class="list-group-item"><a href="#id1" class="ripple internal reference">Подготовка</a></li><li class="list-group-item"><a href="#id2" class="ripple internal reference">Инструкция по установке</a><ul ><li class="list-group-item"><a href="#extra-dependencies" class="ripple internal reference">Дополнительные зависимости</a></li><li class="list-group-item"><a href="#access-rights" class="ripple internal reference">Права доступа</a></li><li class="list-group-item"><a href="#start-the-local-odoo-instance" class="ripple internal reference">Запуск локального экземпляра Odoo</a></li><li class="list-group-item"><a href="#test-the-instance" class="ripple internal reference">Проверка работы</a></li><li class="list-group-item"><a href="#automatically-start-odoo" class="ripple internal reference">Автоматический запуск Odoo</a></li><li class="list-group-item"><a href="#id3" class="ripple internal reference">Настройка Рабочего Места Кассира</a></li></ul></li></ul></li><li class="list-group-item"><a href="#posbox-technical-documentation" class="ripple internal reference">Техническая документация POSBox</a><ul ><li class="list-group-item"><a href="#technical-overview" class="ripple internal reference">Технический обзор</a><ul ><li class="list-group-item"><a href="#the-posbox-hardware" class="ripple internal reference">Оборудование POSBox</a></li><li class="list-group-item"><a href="#compatible-peripherals" class="ripple internal reference">Совместимые Периферийные Устройства</a></li><li class="list-group-item"><a href="#the-posbox-software" class="ripple internal reference">Программное обеспечение POSBox</a></li></ul></li><li class="list-group-item"><a href="#accessing-the-posbox" class="ripple internal reference">Доступ к POSBox</a><ul ><li class="list-group-item"><a href="#local-access" class="ripple internal reference">Локальный доступ</a></li><li class="list-group-item"><a href="#remote-access" class="ripple internal reference">Удаленный доступ</a></li></ul></li><li class="list-group-item"><a href="#updating-the-posbox-software" class="ripple internal reference">Обновление программного обеспечения POSBox</a></li></ul></li><li class="list-group-item"><a href="#troubleshoot" class="ripple internal reference">Устранение неполадок</a><ul ><li class="list-group-item"><a href="#the-pos-cannot-connect-to-the-posbox" class="ripple internal reference">РМК не может подключиться к POSBox</a></li><li class="list-group-item"><a href="#the-barcode-scanner-is-not-working" class="ripple internal reference">Сканер штрих-кодов не работает</a></li><li class="list-group-item"><a href="#the-barcode-scanner-is-not-working-reliably" class="ripple internal reference">Сканер штрих-кодов не надежно работает</a></li><li class="list-group-item"><a href="#printing-the-receipt-takes-too-much-time" class="ripple internal reference">Печать чека занимает слишком много времени</a></li><li class="list-group-item"><a href="#some-characters-are-not-correctly-printed-on-the-receipt" class="ripple internal reference">Некоторые символы не правильно печатаются на чеке</a></li><li class="list-group-item"><a href="#the-printer-is-offline" class="ripple internal reference">Принтер не доступен</a></li><li class="list-group-item"><a href="#the-cashdrawer-does-not-open" class="ripple internal reference">Денежный ящик не открывается</a></li></ul></li><li class="list-group-item"><a href="#credits" class="ripple internal reference">Благодарности</a></li></ul>
              
              
              <p class="gith-container"><a href="https://github.com/odoo/documentation-user/edit/11.0/point_of_sale/overview/setup.rst" class="gith-link" target="_blank">
                  Оригинал на GitHub
              </a></p>
              
            </div>
          </aside>
          
          <article class="doc-body ">
            <div class="ya-share2" data-services="collections,vkontakte,facebook,odnoklassniki,moimir,gplus,twitter,linkedin,viber,whatsapp,skype,telegram"></div>
            
            
  <section id="point-of-sale-hardware-setup"></section><section id="posbox-setup-guide"><h2 >Руководство по настройке POSBox</h2><img src="../../_images/posbox_setup.png" class="img-responsive"></section><section id="prerequisites"><h3 >Подготовка</h3><p >Прежде чем вы начнете настраивать POSBox убедитесь, что у вас есть все для этого необходимое. Вам понадобится :</p><ul ><li ><p >Сам POSBox</p></li><li ><p >Блок питания на 2 ампера</p></li><li ><p >Компьютер или планшет с современным браузером</p></li><li >A running SaaS or Odoo database with the Point of Sale installed</li><li ><p >Подключение к локальной сети с DHCP(это настройки по умолчанию)</p></li><li ><p >Epson ТМ-Т20 принтер или другой ESC/POS совместимый принтер с USB интерфесом (официально поддерживаеме принтеры указаны на странице РМК оборудования &lt;<a href="https://www.odoo.com/page/pos-ipad-android-hardware" class="external reference">https://www.odoo.com/page/pos-ipad-android-hardware</a>&gt;`_)</p></li><li ><p >Honeywell Eclipse USB Сканер Штри-Кодов или любой другой совместимый сканер</p></li><li ><p >Ящик кассира совместимый с Epson принтером</p></li><li >An RJ45 Ethernet Cable (optional, Wi-Fi is built in)</li></ul></section><section id="step-by-step-setup-guide"><h3 >Инструкция по установке</h3></section><section id="current-version-of-the-posbox-since-2015"><h4 >Новая версия POSBox (после 2015 год)</h4><div ><img src="../../_images/posbox_2_doc_schema.svg" class="img-responsive"></div></section><section id="connect-peripheral-devices"><h4 >Подключите периферийные устройства</h4><p >Официально поддерживаемый список оборудования вы найдете на странице <a href="https://www.odoo.com/page/pos-ipad-android-hardware" class="external reference">Страница с оборудованием для РМК</a>, но и другое оборудование будет работать хорошо.</p><ul ><li ><p ><strong >Принтер</strong>: Подключите ESC/POS принтер к порту USB и включите его в розетку.</p></li><li ><p ><strong >Денежный ящик</strong>: Денежный ящик должен быть подключен к принтеру через кабель RJ25.</p></li><li ><p ><strong >Сканер штрих-кода</strong>: Подключите сканер штрих-кодов. Для того, чтобы ваш сканер штрих-кодов, был совместим, он должен вести себя как клавиатура и должен быть настроен на <strong >US QWERTY</strong>. Он также должен заканчивать штрих-код символом <strong >Ввод</strong> (код клавиш 28). Данные настройки позволят сразу начать работать с вашим сканером штрих-кодов.</p></li><li ><p ><strong >Весы</strong>: Подключите свои весы и включите их в розетку.</p></li><li ><p ><strong >Локальная сеть</strong>: Если вы не хотите использовать Wi-Fi, подключите Ethernet-кабель. Убедитесь в том что POSBox подключен к той же сети, что и устройство РМК.</p></li><li ><strong >Wi-Fi</strong>: The current version of the POSBox has Wi-Fi built
in. Make sure not to plug in an Ethernet cable, because all Wi-Fi
functionality will be bypassed when a wired network connection is
available.</li></ul></section><section id="power-the-posbox"><h4 >Питание для POSBox</h4><p >Подключите адаптер питания к POSBox, должен загореться ярко-красный светодиодный индикатор состояния.</p></section><section id="make-sure-the-posbox-is-ready"><h4 >Убедитесь, что POSBox готов</h4><p >После подключения POSBox подождите некоторое время, оно нужно для загрузки операционной системы на устройстве. Как только POSBox будет готов, он распечатает чек со статусом готовности и его IP-адресом. Также светодиод состояния, рядом с красным светодиодом, будет постоянно светиться зеленым цветом.</p></section><section id="setup-the-point-of-sale"><h4 >Настройка Рабочего Места Кассира</h4><p >To setup the POSBox in the Point of Sale go to <span class="menuselection">Point
of Sale ‣ Configuration ‣ Point of Sale</span> and select your Point of
Sale. Scroll down to the <code >PoSBox / Hardware Proxy</code> section and
activate the options for the hardware you want to use through the
POSBox. Specifying the IP of the POSBox is recommended (it is printed
on the receipt that gets printed after booting up the POSBox). When
the IP is not specified the Point of Sale will attempt to find it on
the local network.</p><p >If you are running multiple Point of Sale on the same POSBox, make sure
that only one of them has Remote Scanning/Barcode Scanner activated.</p><p >Так же неплохо было бы сделать так, чтобы IP POSBox никогда не менялся в вашей сети. Обратитесь к документации маршрутизатора, для того, чтобы достичь этого.</p></section><section id="launch-the-point-of-sale"><h4 >Запуск Рабочего Места Кассира</h4><p >Если вы явно не указали IP адрес для POSBox в конфигурации РМК, вам потребуется некоторое время для того чтобы просканировать сеть и найти POSBox. Это делается один раз.</p><p >Теперь ваше Рабочее Место Кассира подключено к POSBox и ваше оборудование готово к работе.</p></section><section id="wi-fi-configuration"><h3 >Настройка Wi-Fi</h3><p >The most recent version of the POSBox has Wi-Fi built in. If you're
using an older version you'll need a Linux compatible USB Wi-Fi
adapter. Most commercially available Wi-Fi adapters are Linux
compatible. Officially supported are Wi-Fi adapters with a Ralink 5370
chipset.</p><p >Убедитесь, что не подключен Ethernet-кабель, так как все функции связанные с Wi-Fi будут отключены, если существует проводное подключение к сети.</p><p >Когда POSBox загружается с Wi-Fi-адаптером он создает собственную Wi-Fi точку доступа, которая называется &quot;Posbox&quot; и к которой вы сможете подключиться. Вся необходимая информация будет напечатана на чеке который будет напечатан после загрузки POSBox. Для того, чтобы подключить POSBox к уже существующей Wi-Fi сети перейдите на главную страницу POSBox (указано на чеке) и перейдите на страницу настройки Wi-Fi. Там вы можете выбрать сеть для подключения. Обратите внимание, что мы поддерживаем только открытый и WPA(2)-PSK сети. При подключении к WPA сети, заполните поле пароль. POSBox пытается подключиться к указанной сети и распечатает новый чек со статусом POSBox после того, как он будет подключен.</p><p >Если вы планируете постоянно использовать POSBox с Wi-Fi, вы можете использовать флажок &quot;постоянно&quot; на странице конфигурации Wi-Fi при подключении к сети. Это приведет к тому, что выбор сети будет сохраняться при перезагрузке. Это означает, что вместо запуска собственной сети &quot;Posbox&quot; она всегда будет пытаться подключиться к указанной сети.</p><p >Когда POSBox не удается подключиться к сети, он вернется обратно, начиная с создания своей собственной &quot;Posbox&quot; точки доступа. Если потеряно соединение с Wi-Fi после подключения к нему, POSBox будет пытаться восстановить подключение автоматически.</p></section><section id="multi-pos-configuration"><h3 >Настройка нескольких РМК с одним POSBox</h3><p >Рекомендуемый способ установки магазина с несколькими РМК является тот при котром каждому РМК соотвествет свой POSBox. В этом случае необходимо вручную указать IP-адрес каждого POSBox в каждом РМК. Вы также должны настроить вашу сеть, чтобы убедиться, что IP-адреса POSBox не меняются. Пожалуйста, обратитесь к документации маршрутизатора.</p></section><section id="posboxless-guide-advanced"><h2 >Руководство по настройке РМК без POSBox (расширенное)</h2><img src="../../_images/posboxless_setup.png" class="img-responsive"><p >Если вы используете ваше РМК, основанное на Debian дистрибутиве Linux, вам не нужно POSBox так как вы можете запустить его локально в виде программного обеспечения. Однако процесс установки не столь очевиден как может показаться с первого раза. Вам нужно по крайней мере знать, как устанавливать и запускать Odoo. Вы можете также столкнуться с проблемами, специфичными для вашего дистрибутива или для вашей конкретной системы и конфигурации оборудования.</p><p >Драйвера для различных типов оборудования представлены в виде модулей Odoo. На самом деле, POSBox запускае экземпляр odoo, с которым общается РМК. Экземпляр Odoo который работает на POSBox очень отличается от <code >реального</code> экземпляра Odoo. Он <strong >не обрабатывает и не хранит</strong> никаких бизнес-данных (например. Кассовых чеков), а только служит в качестве шлюза между интерфейсом РМК и оборудованием.</p><p >Целью данного раздела является создание локальный экземпляр Odoo, который ведет себя как экземпляр, работающий на POSBox.</p></section><section id="image-building-process"><h3 >Процесс создания образа</h3><p >We generate the official POSBox images using the scripts in
<a href="https://github.com/odoo/odoo/tree/11.0/addons/point_of_sale/tools/posbox" class="external reference">https://github.com/odoo/odoo/tree/11.0/addons/point_of_sale/tools/posbox</a>. More
specifically, we run
<a href="https://github.com/odoo/odoo/blob/11.0/addons/point_of_sale/tools/posbox/posbox_create_image.sh" class="external reference">posbox_create_image.sh</a>.
This builds an image
called <code >posbox.img</code>, which we zip and upload to <a href="https://nightly.odoo.com" class="external reference">nightly.odoo.com</a>
for users to download.</p><p >Скрипты в этот каталоге могут оказаться полезным в качестве эталона, если вы застряли или хотите более подробно узнать о чем-то.</p></section><section id="summary-of-the-image-creation-process"><h4 >Краткое описание процесса создания образа</h4><p >Процесс создания изображения начинается с загрузки последней версии Raspbian образа с сайта <a href="https://www.raspbian.org/" class="external reference">https://www.raspbian.org/</a> . Затем образ локально монтируется и копируются все необходимые файлы и скрипты, которые позволят образ Raspbian превратить в POSBox, в момент его загруки. Эти скрипты обновят Raspbian, удалят неиспользуемые пакеты и установят необходимые пакеты. Для загрузки Raspbian мы использовать qemu, который способен обеспечить эмуляцию процессора ARM. После этого, эмулируемая ОС Raspbian выключится. Мы потом еще раз локально монтируем образ, удаляем скрипты, которые были использованы для инициализации системы при загрузке и копируем дополнительные конфигурационные файлы. Полученный образ готов к проверке и использованию.</p></section><section id="id1"><h3 >Подготовка</h3><ul ><li ><p >Linux дистрибутив на базе Debian (Debian, Ubuntu, Mint, и т. д.)</p></li><li >A running Odoo instance you connect to load the Point of Sale</li><li ><p >Вы должны удалить драйвера на ESC/POS принтер, так как они могут конфликтовать со встроенным в Odoo драйвером</p></li></ul></section><section id="id2"><h3 >Инструкция по установке</h3></section><section id="extra-dependencies"><h4 >Дополнительные зависимости</h4><p >Т.к. Odoo работает на Python 2, вы должны проверить, какую версия pip вам необходимо использовать.</p><p ><code ># pip --version</code></p><p >Если вернулось значение похожее на это:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="mf">1.5</span><span class="o">.</span><span class="mi">6</span> <span class="kn">from</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">3</span><span class="o">/</span><span class="n">dist</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">pip</span><span class="o">-</span><span class="mf">1.5</span><span class="o">.</span><span class="mi">6</span><span class="o">-</span><span class="n">py3</span><span class="o">.</span><span class="mf">3.</span><span class="n">egg</span> <span class="p">(</span><span class="n">python</span> <span class="mf">3.3</span><span class="p">)</span>
</pre></div>
</div>
<p >То вам необходимо использовать pip2.</p><p >Если вернулось значение похожее на это:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="mf">1.4</span><span class="o">.</span><span class="mi">1</span> <span class="kn">from</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">dist</span><span class="o">-</span><span class="n">packages</span> <span class="p">(</span><span class="n">python</span> <span class="mf">2.7</span><span class="p">)</span>
</pre></div>
</div>
<p >Вы можете использовать pip.</p><p >Модули драйверов требуют установки новых модулей python:</p><p ><code ># pip install pyserial</code></p><p ><code ># pip install pyusb==1.0.0b1</code></p><p ><code ># pip install qrcode</code></p></section><section id="access-rights"><h4 >Права доступа</h4><p >Для драйверов необходим прямой доступ к файлам устройств принтера и сканера штрих-кодов . Это потребует немного системного администрирования. Сначала мы создадим группу, которая имеет доступ к USB-устройствам</p><p ><code ># groupadd usbusers</code></p><p >Затем мы добавим пользователя, который запускает Odoo сервер в группу <code >usbusers</code></p><p ><code ># usermod -a -G usbusers USERNAME</code></p><p >Затем нам нужно создать правила udev, это позволит членам <code >usbusers</code> автоматически получить прямой доступ к USB-устройствам. Для этого создайте файл под названием <code >99-usbusers.rules</code> в каталоге <code >/etc/udev/rules.d/</code> следующего содержания:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SUBSYSTEM</span><span class="o">==</span><span class="s2">&quot;usb&quot;</span><span class="p">,</span> <span class="n">GROUP</span><span class="o">=</span><span class="s2">&quot;usbusers&quot;</span><span class="p">,</span> <span class="n">MODE</span><span class="o">=</span><span class="s2">&quot;0660&quot;</span>
<span class="n">SUBSYSTEMS</span><span class="o">==</span><span class="s2">&quot;usb&quot;</span><span class="p">,</span> <span class="n">GROUP</span><span class="o">=</span><span class="s2">&quot;usbusers&quot;</span><span class="p">,</span> <span class="n">MODE</span><span class="o">=</span><span class="s2">&quot;0660&quot;</span>
</pre></div>
</div>
<p >После вам необходимо перезагрузить машину.</p></section><section id="start-the-local-odoo-instance"><h4 >Запуск локального экземпляра Odoo</h4><p >Мы должны запустить Odoo сервер с правильными настройками</p><p ><code >$ ./odoo.py --load=web,hw_proxy,hw_posbox_homepage,hw_posbox_upgrade,hw_scale,hw_scanner,hw_escpos</code></p></section><section id="test-the-instance"><h4 >Проверка работы</h4><p >Подключите все оборудование к USB-портам вашей машины, и перейдите <code >http://localhost:8069/hw_proxy/status</code> обновите страницу несколько раз и посмотрите, все ли ваши устройства показываются как <em >на связи</em>. Возможные источники ошибок: пути до устройств в дистрибутиве отличаются от путей от пути которые мониторят драйвера, другой процесс перехватил эксклюзивный доступ к устройствам, правила udev не применяются или заменено другим.</p></section><section id="automatically-start-odoo"><h4 >Автоматический запуск Odoo</h4><p >Теперь вы должны убедиться, что Odoo автоматически запускается после загрузки. Существуют различные способы добиться этого, и как это сделать, зависит от вашей конкретной установки. С помощью системы инициализации дистрибутива, вероятно, самый простой способ для достижения этой цели.</p></section><section id="id3"><h4 >Настройка Рабочего Места Кассира</h4><p >В поле IP-адрес в конфигурации РМК должно быть <code >127.0.0.1</code> или <code >localhost</code>, если вы запускаете созданный сервер Odoo на компьютере, который вы будете использовать в качестве РМК. Вы также можете оставить его пустым.</p></section><section id="posbox-technical-documentation"><h2 >Техническая документация POSBox</h2></section><section id="technical-overview"><h3 >Технический обзор</h3></section><section id="the-posbox-hardware"><h4 >Оборудование POSBox</h4><p >Оборудование POSBox основывается на <a href="https://www.raspberrypi.org/products/raspberry-pi-2-model-b/" class="external reference">Raspberry Pi 2</a>, популярного одноплатного компьютера. Raspberry Pi 2 работает с 2А микро-USB блоком питания. 2А необходимы для того, чтобы дать достаточно энергии на сканеры штрих-кода. Программное обеспечение устанавливается на SD карты емкостью 8 Гб 10 класса или выше . Все это оборудование легко доступно по всему миру от независимых поставщиков.</p></section><section id="compatible-peripherals"><h4 >Совместимые Периферийные Устройства</h4><p >Список официально поддерживаемого оборудования значится на <a href="https://www.odoo.com/page/pos-ipad-android-hardware" class="external reference">странице РМК оборудования</a>.</p></section><section id="the-posbox-software"><h4 >Программное обеспечение POSBox</h4><p >В POSBox работает сильно измененный Raspbian Linux, производный дистрибутив от Debian для Raspberry Pi. Он также выполняет установку <strong >обезжиренного</strong> экземпляра Odoo, который обеспечивает работу только WEB-сервера и драйверов. Драйверы оборудования реализованы как модули Odoo. Эти модули все с приставкой <code >hw_*</code> в названии и это единственные модули, которые работают на POSBox. Odoo используется только в рамках тех возможностей, которые она предоставляет. Никакакие бизнес данные не обрабатываются и не хранятся на POSBox. Данный экземпляр Odoo представляет собой избирательный git-клон ветки <code >8.0</code>.</p><p >Корневой раздел на POSBox монтируется только для чтения, гарантируя,то что мы не затаскаем SD-карту, использовав слишком много циклов записи. Это также гарантирует, что файловая система не может быть повреждена внезапным отключением POSBox. Приложения Linux ожидают, что могут иметь возможность записи хотябы в определенные каталоги. Поэтому мы предоставляем рамдиск для каталогов /etc и /var (Raspbian автоматически предоставляет его для в /tmp). Эти рамдиски устанавливаются <code >setup_ramdisks.sh</code>, который мы запускаем, прежде чем все остальные скрипты, запустив его в <code >/etc/init.d/rcS</code>. Рамдиски называются /etc_ram и /var_ram соответственно. Большинство данных из /etc и /var копируется в эти диски с файловой системой tmpfs. Для того, чтобы ограничить размер рамдисков, мы не копируем туда определенные вещи (к примеру данные менеджера пакетов apt). Затем мы привязываем их к оригинальным каталогам. Таким образом, когда приложение записывает в файл /etc/foo/bar оно на самом деле пишем в /etc_ram/foo/bar. Мы также связываем / с /root_bypass_ramdisks, чтобы иметь возможность получить реальный файл /etc и /var в процессе разработки.</p><p >Логи Odoo сервера с можно найти по адресу:</p><p ><code >/var/log/odoo/odoo.log</code></p><p >Различные скрипты связанные c POSBox (например. Wi-Fi скрипты) работающие на POSBox будут делать записи в лог в /var/log/syslog и эти сообщения будут с тегами <code >posbox_*</code>.</p></section><section id="accessing-the-posbox"><h3 >Доступ к POSBox</h3></section><section id="local-access"><h4 >Локальный доступ</h4><p >Если вы подключите QWERTY USB клавиатуру в один из USB-портов POSBox, и подключите монитор к <em >HDMI</em> порту POSBox, вы можете использовать его как маленький GNU/Linux компьютер и выполнять различные задачи администрирования, такие как просмотр журналов логов.</p><p >POSBox будет автоматически входить в систему как root в терминал по умолчанию.</p></section><section id="remote-access"><h4 >Удаленный доступ</h4><p >Если у вас есть IP-адрес POSBox и SSH-клиент, вы можете получить удаленный доступ к системе POSBox. Учетные данные для входа <code >pi</code>/<code >raspberry</code>.</p></section><section id="updating-the-posbox-software"><h3 >Обновление программного обеспечения POSBox</h3><p >Обновляйте POSBox только в том случае, если у вас возникли проблемы или вы хотите использовать недавно реализованные функции.</p><p >Лучший способ для обновления программного обеспечения POSBox, это скачать новую версию образа записать его на SD-карту. Эта операция подробно описана <a href="http://elinux.org/RPi_Easy_SD_Card_Setup" class="external reference">здесь</a>, просто замените стандартный образ Raspberry Pi последним найденым <a href="http://nightly.odoo.com/master/posbox/" class="external reference">на официальной странице POSBox</a>. Этот способ обновления будут гарантировать, то что вы используете последнюю версию программного обеспечения POSBox.</p><p >Второй способ - обновление через встроенный интерфейс, который может быть найден через страницу POSBox. Хорошая вещь в этом варианте обновления, это то что вы не должны записывать новый образ. Этот метод ограничен в том что он может сделать. Он не может, например. обновить конфигурационные файлы (как например. файл /etc/hostapd.conf). Его можно только модернизировать:</p><ul ><li ><p >Внутреннее приложение Odoo</p></li><li ><p >Скрипты в каталоге <code >odoo/addons/point_of_sale/tools/posbox/configuration/</code></p></li></ul><p >Если есть сомнения, всегда пользуйтесь первым методом обновления.</p></section><section id="troubleshoot"><h2 >Устранение неполадок</h2></section><section id="the-pos-cannot-connect-to-the-posbox"><h3 >РМК не может подключиться к POSBox</h3><ul ><li ><p >Самый простой способ убедиться, что POSBox правильно настроен, это включить подключенный принтер который распечатает чек при возникновении какой-либо ошибки с ее указанием или IP-адрес POSBox в случае успеха. Если чек не печатается, проверьте следующие шаги:</p></li><li ><p >Убедитесь, что POSBox включен, обозначается ярко горящим красным светодиодом.</p></li><li ><p >Убедитесь, что POSBox готов, на это указывает ярко горящий зеленый светодиод рядом с красным. POSBox должен быть готов ~2 минуты после его включения.</p></li><li ><p >Убедитесь, что POSBox подключен к той же сети, что и устройство РМК. Как само устройство так и POSBox должны быть видны на маршрутизаторе в списке устройств, подключенных к вашей сети.</p></li><li ><p >Убедитесь, что ваша сеть настроена с помощью DHCP и выдает IP-адреса в диапазоне 192.168.0.Х, 192.168.1.Х, 10.0.0.Х. Если вы не можете настроить вашу сеть таким образом, вы должны вручную настроить IP-адрес вашего POSBox.</p></li><li ><p >Если вы указали IP-адрес POSBox в конфигурации, убедитесь, что он соответствует напечатанному на чеке отчету о статусе POSBox.</p></li><li ><p >Убедитесь в том, что РМК не загружается по https.</p></li><li ><p >Ошибка в реализации протокола http в Firefox предотвращает автоопределение и не работает стабильно. При использовании Firefox, вы должны вручную настроить IP-адрес POSBox в конфигурации РМК.</p></li></ul></section><section id="the-barcode-scanner-is-not-working"><h3 >Сканер штрих-кодов не работает</h3><ul ><li ><p >Сканер штрих-кодов должен быть настроен в US QWERTY и посылать сигнал нажатия Enter после каждого штрих-кода. Это конфигурация по умолчанию для большинства считывателей штрих-кодов. Обратитесь к документации на устройство чтения штрих-кодов для получения дополнительной информации.</p></li><li ><p >В POSBox требует источника питания 2А для работы с некоторыми сканерами штрихкода. Если Вы не используете родной блок питания, убедитесь, что вы используете другой с достаточной силой тока.</p></li><li ><p >Некоторым сканерам штрих-кодов потребуется больше, чем 2А и не будет работать, или будет работать ненадежно, даже при наличии электропитания. В этих случаях можно подключать сканер штрих-кода к USB-концентратору с автономным питанием.</p></li><li ><p >Некоторые бюджетные сканеры штрих-кодов рекламируют себя не только как сканеры штрих-кодов, но и как USB-клавиатура, и они не будут признаны POSBox.</p></li></ul></section><section id="the-barcode-scanner-is-not-working-reliably"><h3 >Сканер штрих-кодов не надежно работает</h3><ul ><li ><p >Убедитесь, что не более одного устройства со включенным параметром 'Сканировать через прокси'/'Сканер штрих-кодов' подключены к POSBox в одно и то же время.</p></li></ul></section><section id="printing-the-receipt-takes-too-much-time"><h3 >Печать чека занимает слишком много времени</h3><ul ><li ><p >Ожидается небольшая задержка перед первой печатью, так как POSBox будет сделать предварительную обработку, чтобы ускорить следующую печать. Если вы страдаете от задержек, это скорее всего из-за плохого сетевого соединения между РМК и POSBox.</p></li></ul></section><section id="some-characters-are-not-correctly-printed-on-the-receipt"><h3 >Некоторые символы не правильно печатаются на чеке</h3><ul ><li ><p >В POSBox не поддерживает все языки и символы. В настоящее время поддерживаются кодировки на основе латиницы и кириллицы, с базовой поддержкой японского языка.</p></li></ul></section><section id="the-printer-is-offline"><h3 >Принтер не доступен</h3><ul ><li ><p >Убедитесь, что принтер подключен, на него подано питание, достаточно бумаги и закрыта крышка, и нет сообщения об ошибке. Если ошибка остается, обратитесь в службу поддержки.</p></li></ul></section><section id="the-cashdrawer-does-not-open"><h3 >Денежный ящик не открывается</h3><ul ><li ><p >Денежный ящик должен быть подключен к принтеру и должен быть активирован в конфигурации РМК.</p></li></ul></section><section id="credits"><h2 >Благодарности</h2><p >Проект POSBox разработан Frédéric van der Essen с помощью Gary Malherbe, Fabien Meghazi, Nicolas Wisniewsky, Dimitri Del Marmol, Joren Van Onder иAntony Lesuisse.</p><p >Это развитие не было бы возможным без кампании Indiegogo и тех, кто способствовал этому. Особая благодарность партнерам, которые поддержали кампанию:</p><ul ><li >Camptocamp</li><li >BHC</li><li >openBig</li><li >Eeezee-IT</li><li >Solarsis LDA</li><li >ACSONE</li><li >Vauxoo</li><li >Ekomurz</li><li >Datalp</li><li >Dao Systems</li><li >Eggs Solutions</li><li >OpusVL</li></ul><p >А также партнеров, которые поддержали разработку с помощью POSBox Bundle:</p><ul ><li >Willow IT</li><li >E. Akhalwaya &amp; Sons</li><li >Multibase</li><li >Mindesa</li><li >bpso.biz</li><li >Shine IT.</li></ul></section>

          </article>
        </div>
        
        <div id="mask"></div>
      </main>
    </div>
  </div>

  <div class="floating_action_container">
    <a id="floating_action" class="ripple" href="#">
      <i class="mdi-action-explore"></i>
    </a>
    <div id="floating_action_menu">
      <span class="bubble"></span>
      <ul class="list-group content">
        <li class="list-group-item ripple"><a>Cras justo odio</a></li>
        <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
        <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
        <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
        <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
      </ul>
    </div>
  </div>
  <footer class="o_footer_effect">
            <div id="footer" class="container o_not_editable">
                <span class="o_logo o_logo_inverse center-block o_footer_logo"></span>
                <div class="row">
                    <div class="col-xs-12">
                        <hr>
						<p>Перевод документации при поддержке <a href="https://www.yartsev.by/" target="_blank">Ярцев и компаньоны</a> и <a href="https://www.udelta.ru" target="_blank">Udelta</a></p>
                        <hr>
                        <p>
                            <small>Odoo - это набор бизнес-приложений с открытым исходным кодом, которые охватывают все потребности вашей компании: CRM, интернет магазин, бухгалтерский учет, складской учет, POS терминал, управление проектами и т.д. <br> <br>
В то же время полноценное внедрение Odoo может быть очень простым и включать полную интеграцию с вашим предприятием.</small>
                        </p>
                    </div>
                </div>
            </div>

            <div class="o_footer_bottom o_not_editable">
                <div class="container">
                    <a class="small" href="https://www.odoo.com/page/website-builder">Website made with <span class="o_logo o_logo_inverse o_logo_15"></span></a>
                    <div class="social-links pull-right">
                        <a href="https://www.odoo.com/web/about/facebook">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="https://www.odoo.com/web/about/twitter">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="https://www.odoo.com/web/about/linkedin">
                            <i class="fa fa-linkedin"></i>
                        </a>
                        <a href="mailto:info@odoo.com">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>
        </footer><!-- Yandex.Metrika counter --> <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter44508703 = new Ya.Metrika({ id:44508703, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/44508703" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
  </body>
</html>