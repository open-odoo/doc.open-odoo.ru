<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="English">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <title>Odoo Guidelines &mdash; Перевод на русский язык документации Odoo 9.0</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/patchqueue.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/patchqueue.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/doc.js"></script>
    <script type="text/javascript" src="../_static/jquery.noconflict.js"></script>
    <script type="text/javascript" src="https://yastatic.net/es5-shims/0.0.2/es5-shims.min.js"></script>
    <script type="text/javascript" src="https://yastatic.net/share2/share.js"></script>
    <link rel="top" title="Перевод на русский язык документации Odoo 9.0" href="../index.html" />
    <link rel="up" title="Reference" href="../reference.html" />
    <link rel="next" title="Upgrade API" href="upgrade_api.html" />
    <link rel="prev" title="Workflows" href="workflows.html" /> 
  </head>
  <body role="document"><header class="o_main_header o_has_sub_nav o_inverted ">
    <div class="o_main_header_main">
      <a class="pull-left o_logo" href="/"></a>
      <a href="#" class="o_mobile_menu_toggle visible-xs-block pull-right">
        <span class="sr-only">Toggle navigation</span>
        <span class="mdi-navigation-menu"></span>
      </a>
      <ul class="o_primary_nav">
        <li><a href="/">Документация</a></li>
      </ul>
    </div>
    <nav class="navbar o_sub_nav">
      <div class="container">
        <div class="navbar-header visible-xs">
            <button type="button" class="navbar-toggle collapsed text-left btn-block" data-toggle="collapse" data-target="#o_sub-menu" aria-expanded="false">
              Меню
              <span class="mdi-hardware-keyboard-arrow-down pull-right"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="o_sub-menu">
          <ol class="o_breadcrumb breadcrumb nav navbar-left">
              
              
              





    
        
            <li><a href="../index.html">Документация  (9.0)</a></li>
        
    
    <li class="active"><a href="#">Odoo Guidelines</a></li>

              
          </ol>

          <ul class="navbar-nav navbar-right nav o_sub_nav_actions">
            
              <li class="divider"></li>
            

            
             

<li class="languages dropdown">
    <a class="dropdown-toggle" href="#" data-toggle="dropdown">
        English
    </a>
    <ul class="dropdown-menu" role="menu">
        
            <li><a href="/developer/9.0/ru/reference/guidelines.html">Русский</a></li>
        
    </ul>
</li>



<li class="versions dropdown">
    <a class="dropdown-toggle" href="#" data-toggle="dropdown">
        9.0
    </a>
    <ul class="dropdown-menu" role="menu">
        
            <li><a href="/developer/8.0/en/reference/guidelines.html">8.0</a></li>
        
            <li><a href="/developer/10.0/en/reference/guidelines.html">10.0</a></li>
        
            <li><a href="/developer/11.0/en/reference/guidelines.html">11.0</a></li>
        
    </ul>
</li>

            
          </ul>

          <ul class="nav navbar-nav navbar-right">
            
              <li class="divider"></li>
            

            
            

<li><a href="/user/9.0/en/">Пользователю</a></li>
<li><a href="/developer/9.0/en/">Разработчику</a></li>
<li><a href="/developer/9.0/en/api_integration.html">API</a></li>
<li><a href="/developer/9.0/en/setup/install.html">Установка</a></li>
            

            
              <li class="divider"></li>
            
          </ul>
        </div>
      </div>
    </nav>
  </header><div id="wrap" class="">
    
    
    
    <figure class="card top has_banner">
      <span class="card-img" style="background-image: url('../_static/banners/odoo_guideline.jpg');"></span>
      <div class="container text-center">
        <h1> Odoo Guidelines - Odoo 9.0 </h1>
      </div>
    </figure>
    
    
    
    <div class="container ">
      <main class="container-fluid ">
        
        <div class="row">
          
          <aside>
            <div class="navbar-aside text-center">
              <ul class="list-group text-left nav"><li class="list-group-item"><a href="#module-structure" class="ripple internal reference">Module structure</a><ul ><li class="list-group-item"><a href="#directories" class="ripple internal reference">Directories</a></li><li class="list-group-item"><a href="#file-naming" class="ripple internal reference">File naming</a></li></ul></li><li class="list-group-item"><a href="#xml-files" class="ripple internal reference">XML files</a><ul ><li class="list-group-item"><a href="#format" class="ripple internal reference">Format</a></li><li class="list-group-item"><a href="#naming-xml-id" class="ripple internal reference">Naming xml_id</a><ul ><li class="list-group-item"><a href="#security-view-and-action" class="ripple internal reference">Security, View and Action</a></li><li class="list-group-item"><a href="#inherited-xml" class="ripple internal reference">Inherited XML</a></li></ul></li></ul></li><li class="list-group-item"><a href="#python" class="ripple internal reference">Python</a><ul ><li class="list-group-item"><a href="#pep8-options" class="ripple internal reference">PEP8 options</a></li><li class="list-group-item"><a href="#imports" class="ripple internal reference">Imports</a></li><li class="list-group-item"><a href="#idiomatics-python-programming" class="ripple internal reference">Idiomatics Python Programming</a></li><li class="list-group-item"><a href="#programming-in-odoo" class="ripple internal reference">Programming in Odoo</a><ul ><li class="list-group-item"><a href="#make-your-method-works-in-batch" class="ripple internal reference">Make your method works in batch</a></li><li class="list-group-item"><a href="#propagate-the-context" class="ripple internal reference">Propagate the context</a></li><li class="list-group-item"><a href="#do-not-bypass-the-orm" class="ripple internal reference">Do not bypass the ORM</a></li><li class="list-group-item"><a href="#no-sql-injections-please" class="ripple internal reference">No SQL injections, please !</a></li><li class="list-group-item"><a href="#keep-your-methods-short-simple-when-possible" class="ripple internal reference">Keep your methods short/simple when possible</a></li><li class="list-group-item"><a href="#never-commit-the-transaction" class="ripple internal reference">Never commit the transaction</a></li><li class="list-group-item"><a href="#use-translation-method-correctly" class="ripple internal reference">Use translation method correctly</a></li></ul></li><li class="list-group-item"><a href="#symbols-and-conventions" class="ripple internal reference">Symbols and Conventions</a></li></ul></li><li class="list-group-item"><a href="#javascript-and-css" class="ripple internal reference">Javascript and CSS</a></li><li class="list-group-item"><a href="#git" class="ripple internal reference">Git</a><ul ><li class="list-group-item"><a href="#commit-message" class="ripple internal reference">Commit message</a></li></ul></li></ul>
              
              
              <p class="gith-container"><a href="https://github.com/odoo/odoo/edit/9.0/doc/reference/guidelines.rst" class="gith-link" target="_blank">
                  Оригинал на GitHub
              </a></p>
              
            </div>
          </aside>
          
          <article class="doc-body ">
            <div class="ya-share2" data-services="collections,vkontakte,facebook,odnoklassniki,moimir,gplus,twitter,linkedin,viber,whatsapp,skype,telegram"></div>
            
            
  <section id="odoo-guidelines"><p >This page introduces the new Odoo Coding Guidelines. Those aim to improve the quality of the code (e.g. better readability of source) and Odoo Apps. Indeed, proper code eases maintenance, aids debugging, lowers complexity and promotes reliability.</p><p >These guidelines should be applied to every new module, and new developpment. These guidelines will be applied to old module <strong >only</strong> in case of code refactoring (migration to new API, big refactoring, ...).</p><div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p >These guidelines are written with new modules and new files in mind. When
modifying existing files, the original style of the file strictly supersedes
any other style guidelines. In other words, never modify existing files in
order to apply these guidelines, to avoid disrupting the revision history of
each line. For more details, see our <a href="https://odoo.com/submit-pr" class="external reference alert-link">pull request guide</a>.</p></div></section><section id="module-structure"><h2 >Module structure</h2></section><section id="directories"><h3 >Directories</h3><p >A module is organised in important directories. Those contain the business logic; having a look at them should make understand the purpose of the module.</p><ul ><li ><em >data/</em> : demo and data xml</li><li ><em >models/</em> : models definition</li><li ><em >controllers/</em> : contains controllers (HTTP routes).</li><li ><em >views/</em> : contains the views and templates</li><li ><em >static/</em> : contains the web assets, separated into <em >css/, js/, img/, lib/, ...</em></li></ul><p >Other optional directories compose the module.</p><ul ><li ><em >wizard/</em> : regroups the transient models (formerly <em >osv_memory</em>) and their views.</li><li ><em >report/</em> : contains the reports (RML report <strong >[deprecated]</strong>, models based on SQL views (for reporting) and other complex reports). Python objects and XML views are included in this directory.</li><li ><em >tests/</em> : contains the Python/YML tests</li></ul></section><section id="file-naming"><h3 >File naming</h3><p >For <em >views</em> declarations, split backend views from (frontend)
templates in 2 differents files.</p><p >For <em >models</em>, split the business logic by sets of models, in each set
select a main model, this model gives its name to the set. If there is
only one model, its name is the same as the module name. For
each set named &lt;main_model&gt; the following files may be created:</p><ul ><li ><code class="file">models/<em >&lt;main_model&gt;</em>.py</code></li><li ><code class="file">models/<em >&lt;inherited_main_model&gt;</em>.py</code></li><li ><code class="file">views/<em >&lt;main_model&gt;</em>_templates.xml</code></li><li ><code class="file">views/<em >&lt;main_model&gt;</em>_views.xml</code></li></ul><p >For instance, <em >sale</em> module introduces <code >sale_order</code> and
<code >sale_order_line</code> where <code >sale_order</code> is dominant. So the
<code >&lt;main_model&gt;</code> files will be named <code class="file">models/sale_order.py</code> and
<code class="file">views/sale_order_views.py</code>.</p><p >For <em >data</em>, split them by purpose : demo or data. The filename will be
the main_model name, suffixed by <em >_demo.xml</em> or <em >_data.xml</em>.</p><p >For <em >controllers</em>, the only file should be named <em >main.py</em>. Otherwise, if you need to inherit an existing controller from another module, its name will be <em >&lt;module_name&gt;.py</em>. Unlike <em >models</em>, each controller class should be contained in a separated file.</p><p >For <em >static files</em>, since the resources can be used in different contexts (frontend, backend, both), they will be included in only one bundle. So, CSS/Less, JavaScript and XML files should be suffixed with the name of the bundle type. i.e.: <em >im_chat_common.css</em>, <em >im_chat_common.js</em> for 'assets_common' bundle, and <em >im_chat_backend.css</em>, <em >im_chat_backend.js</em> for 'assets_backend' bundle.
If the module owns only one file, the convention will be <em >&lt;module_name&gt;.ext</em> (i.e.: <em >project.js</em>).
Don't link data (image, libraries) outside Odoo: do not use an
URL to an image but copy it in our codebase instead.</p><p >Regarding <em >data</em>, split them by purpose: data or demo. The filename will be
the <em >main_model</em> name, suffixed by <em >_data.xml</em> or <em >_demo.xml</em>.</p><p >Regarding <em >wizards</em>, naming convention is :</p><ul ><li ><code class="file"><em >&lt;main_transient&gt;</em>.py</code></li><li ><code class="file"><em >&lt;main_transient&gt;</em>_views.xml</code></li></ul><p >Where <em >&lt;main_transient&gt;</em> is the name of the dominant transient model, just like for <em >models</em>. &lt;main_transient&gt;.py can contains the models 'model.action' and 'model.action.line'.</p><p >For <em >statistics reports</em>, their names should look like :</p><ul ><li ><code class="file"><em >&lt;report_name_A&gt;</em>_report.py</code></li><li ><code class="file"><em >&lt;report_name_A&gt;</em>_report_views.py</code> (often pivot and graph views)</li></ul><p >For <em >printable reports</em>, you should have :</p><ul ><li ><code class="file"><em >&lt;print_report_name&gt;</em>_reports.py</code> (report actions, paperformat definition, ...)</li><li ><code class="file"><em >&lt;print_report_name&gt;</em>_templates.xml</code> (xml report templates)</li></ul><p >The complete tree should look like</p><div class="highlight-text"><div class="highlight"><pre><span></span>addons/&lt;my_module_name&gt;/
|-- __init__.py
|-- __openerp__.py
|-- controllers/
|   |-- __init__.py
|   |-- &lt;inherited_module_name&gt;.py
|   `-- main.py
|-- data/
|   |-- &lt;main_model&gt;_data.xml
|   `-- &lt;inherited_main_model&gt;_demo.xml
|-- models/
|   |-- __init__.py
|   |-- &lt;main_model&gt;.py
|   `-- &lt;inherited_main_model&gt;.py
|-- report/
|   |-- __init__.py
|   |-- &lt;main_stat_report_model&gt;.py
|   |-- &lt;main_stat_report_model&gt;_views.xml
|   |-- &lt;main_print_report&gt;_reports.xml
|   `-- &lt;main_print_report&gt;_templates.xml
|-- security/
|   |-- ir.model.access.csv
|   `-- &lt;main_model&gt;_security.xml
|-- static/
|   |-- img/
|   |   |-- my_little_kitten.png
|   |   `-- troll.jpg
|   |-- lib/
|   |   `-- external_lib/
|   `-- src/
|       |-- js/
|       |   `-- &lt;my_module_name&gt;.js
|       |-- css/
|       |   `-- &lt;my_module_name&gt;.css
|       |-- less/
|       |   `-- &lt;my_module_name&gt;.less
|       `-- xml/
|           `-- &lt;my_module_name&gt;.xml
|-- views/
|   |-- &lt;main_model&gt;_templates.xml
|   |-- &lt;main_model&gt;_views.xml
|   |-- &lt;inherited_main_model&gt;_templates.xml
|   `-- &lt;inherited_main_model&gt;_views.xml
`-- wizard/
    |-- &lt;main_transient_A&gt;.py
    |-- &lt;main_transient_A&gt;_views.xml
    |-- &lt;main_transient_B&gt;.py
    `-- &lt;main_transient_B&gt;_views.xml
</pre></div>
</div>
<div role="alert" class="alert-info alert"><p class="alert-title">Note</p><p >File names should only contain <code >[a-z0-9_]</code> (lowercase
alphanumerics and <code >_</code>)</p></div><div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p >Use correct file permissions : folder 755 and file 644.</p></div></section><section id="xml-files"><h2 >XML files</h2></section><section id="format"><h3 >Format</h3><p >To declare a record in XML, the <strong >record</strong> notation (using <em >&lt;record&gt;</em>) is recommended:</p><ul ><li >Place <code >id</code> attribute before <code >model</code></li><li >For field declaration, <code >name</code> attribute is first. Then place the
<em >value</em> either in the <code >field</code> tag, either in the <code >eval</code>
attribute, and finally other attributes (widget, options, ...)
ordered by importance.</li><li >Try to group the record by model. In case of dependencies between
action/menu/views, this convention may not be applicable.</li><li >Use naming convention defined at the next point</li><li >The tag <em >&lt;data&gt;</em> is only used to set not-updatable data with <code >noupdate=1</code></li></ul><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;view_id&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.ui.view&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>view.name<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;model&quot;</span><span class="nt">&gt;</span>object_name<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;priority&quot;</span> <span class="na">eval=</span><span class="s">&quot;16&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;arch&quot;</span> <span class="na">type=</span><span class="s">&quot;xml&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tree&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;my_field_1&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;my_field_2&quot;</span> <span class="na">string=</span><span class="s">&quot;My Label&quot;</span> <span class="na">widget=</span><span class="s">&quot;statusbar&quot;</span> <span class="na">statusbar_visible=</span><span class="s">&quot;draft,sent,progress,done&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/tree&gt;</span>
    <span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;/record&gt;</span>
</pre></div>
</div>
<p >Odoo supports custom tags acting as syntactic sugar:</p><ul ><li >menuitem: use it as a shortcut to declare a <code >ir.ui.menu</code></li><li >workflow: the &lt;workflow&gt; tag sends a signal to an existing workflow.</li><li >template: use it to declare a QWeb View requiring only the <code >arch</code> section of the view.</li><li >report: use to declare a <a href="actions.html#reference-actions-report" class="internal reference"><span class="std std-ref">report action</span></a></li><li >act_window: use it if the record notation can't do what you want</li></ul><p >The 4 first tags are prefered over the <em >record</em> notation.</p></section><section id="naming-xml-id"><h3 >Naming xml_id</h3></section><section id="security-view-and-action"><h4 >Security, View and Action</h4><p >Use the following pattern :</p><ul ><li >For a menu: <code class="samp"><em >&lt;model_name&gt;</em>_menu</code></li><li >For a view: <code class="samp"><em >&lt;model_name&gt;</em>_view_<em >&lt;view_type&gt;</em></code>, where <em >view_type</em> is
<code >kanban</code>, <code >form</code>, <code >tree</code>, <code >search</code>, ...</li><li >For an action: the main action respects <code class="samp"><em >&lt;model_name&gt;</em>_action</code>.
Others are suffixed with <code class="samp">_<em >&lt;detail&gt;</em></code>, where <em >detail</em> is a
lowercase string briefly explaining the action.
This is used only if multiple actions are declared for the
model.</li><li >For a group: <code class="samp"><em >&lt;model_name&gt;</em>_group_<em >&lt;group_name&gt;</em></code> where <em >group_name</em>
is the name of the group, generally 'user', 'manager', ...</li><li >For a rule: <code class="samp"><em >&lt;model_name&gt;</em>_rule_<em >&lt;concerned_group&gt;</em></code> where
<em >concerned_group</em> is the short name of the concerned group ('user'
for the 'model_name_group_user', 'public' for public user, 'company'
for multi-company rules, ...).</li></ul><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- views and menus --&gt;</span>
<span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;model_name_view_form&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.ui.view&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/record&gt;</span>

<span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;model_name_view_kanban&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.ui.view&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/record&gt;</span>

<span class="nt">&lt;menuitem</span>
    <span class="na">id=</span><span class="s">&quot;model_name_menu_root&quot;</span>
    <span class="na">name=</span><span class="s">&quot;Main Menu&quot;</span>
    <span class="na">sequence=</span><span class="s">&quot;5&quot;</span>
<span class="nt">/&gt;</span>
<span class="nt">&lt;menuitem</span>
    <span class="na">id=</span><span class="s">&quot;model_name_menu_action&quot;</span>
    <span class="na">name=</span><span class="s">&quot;Sub Menu 1&quot;</span>
    <span class="na">parent=</span><span class="s">&quot;module_name.module_name_menu_root&quot;</span>
    <span class="na">action=</span><span class="s">&quot;model_name_action&quot;</span>
    <span class="na">sequence=</span><span class="s">&quot;10&quot;</span>
<span class="nt">/&gt;</span>

<span class="c">&lt;!-- actions --&gt;</span>
<span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;model_name_action&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.actions.act_window&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/record&gt;</span>

<span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;model_name_action_child_list&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.actions.act_window&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/record&gt;</span>

<span class="c">&lt;!-- security --&gt;</span>
<span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;module_name_group_user&quot;</span> <span class="na">model=</span><span class="s">&quot;res.groups&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/record&gt;</span>

<span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;model_name_rule_public&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.rule&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/record&gt;</span>

<span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;model_name_rule_company&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.rule&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/record&gt;</span>
</pre></div>
</div>
<div role="alert" class="alert-info alert"><p class="alert-title">Note</p><p >View names use dot notation <code >my.model.view_type</code> or
<code >my.model.view_type.inherit</code> instead of <em >&quot;This is the form view of
My Model&quot;</em>.</p></div></section><section id="inherited-xml"><h4 >Inherited XML</h4><p >The naming pattern of inherited view is
<code class="samp"><em >&lt;base_view&gt;</em>_inherit_<em >&lt;current_module_name&gt;</em></code>. A module may only
extend a view once.  Suffix the orginal name with
<code class="samp">_inherit_<em >&lt;current_module_name&gt;</em></code> where <em >current_module_name</em> is the
technical name of the module extending the view.</p><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;inherited_model_view_form_inherit_my_module&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.ui.view&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/record&gt;</span>
</pre></div>
</div>
</section><section id="python"><h2 >Python</h2></section><section id="pep8-options"><h3 >PEP8 options</h3><p >Using a linter can help show syntax and semantic warnings or errors. Odoo
source code tries to respect Python standard, but some of them can be ignored.</p><ul ><li >E501: line too long</li><li >E301: expected 1 blank line, found 0</li><li >E302: expected 2 blank lines, found 1</li><li >E126: continuation line over-indented for hanging indent</li><li >E123: closing bracket does not match indentation of opening bracket's line</li><li >E127: continuation line over-indented for visual indent</li><li >E128: continuation line under-indented for visual indent</li><li >E265: block comment should start with '# '</li></ul></section><section id="imports"><h3 >Imports</h3><p >The imports are ordered as</p><ol ><li >External libraries (one per line sorted and split in python stdlib)</li><li >Imports of <code >odoo</code></li><li >Imports from Odoo modules (rarely, and only if necessary)</li></ol><p >Inside these 3 groups, the imported lines are alphabetically sorted.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># 1 : imports of python lib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="c1"># 2 :  imports of odoo</span>
<span class="kn">import</span> <span class="nn">odoo</span>
<span class="kn">from</span> <span class="nn">odoo</span> <span class="kn">import</span> <span class="n">api</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">models</span> <span class="c1"># alphabetically ordered</span>
<span class="kn">from</span> <span class="nn">odoo.tools.safe_eval</span> <span class="kn">import</span> <span class="n">safe_eval</span> <span class="k">as</span> <span class="nb">eval</span>
<span class="kn">from</span> <span class="nn">odoo.tools.translate</span> <span class="kn">import</span> <span class="n">_</span>
<span class="c1"># 3 :  imports from odoo modules</span>
<span class="kn">from</span> <span class="nn">odoo.addons.website.models.website</span> <span class="kn">import</span> <span class="n">slug</span>
<span class="kn">from</span> <span class="nn">odoo.addons.web.controllers.main</span> <span class="kn">import</span> <span class="n">login_redirect</span>
</pre></div>
</div>
</section><section id="idiomatics-python-programming"><h3 >Idiomatics Python Programming</h3><ul ><li >Each python file should have <code ># -*- coding: utf-8 -*-</code> as first line.</li><li >Always favor <em >readability</em> over <em >conciseness</em> or using the language features or idioms.</li><li >Don't use <code >.clone()</code></li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="n">new_dict</span> <span class="o">=</span> <span class="n">my_dict</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="n">new_list</span> <span class="o">=</span> <span class="n">old_list</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="c1"># good</span>
<span class="n">new_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>
<span class="n">new_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">old_list</span><span class="p">)</span>
</pre></div>
</div>
<ul ><li >Python dictionnary : creation and update</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># -- creation empty dict</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">my_dict2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="c1"># -- creation with values</span>
<span class="c1"># bad</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="c1"># good</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

<span class="c1"># -- update dict</span>
<span class="c1"># bad</span>
<span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;baz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c1"># good</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">baz</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">my_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">my_dict2</span><span class="p">)</span>
</pre></div>
</div>
<ul ><li >Use meaningful variable/class/method names</li><li >Useless variable : Temporary variables can make the code clearer by giving
names to objects, but that doesn't mean you should create temporary variables
all the time:</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># pointless</span>
<span class="n">schema</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;schema&#39;</span><span class="p">]</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;schema&#39;</span><span class="p">:</span> <span class="n">schema</span><span class="p">}</span>
<span class="c1"># simpler</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;schema&#39;</span><span class="p">:</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;schema&#39;</span><span class="p">]}</span>
</pre></div>
</div>
<ul ><li >Multiple return points are OK, when they're simpler</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># a bit complex and with a redundant temp variable</span>
<span class="k">def</span> <span class="nf">axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                <span class="n">axes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
                <span class="n">axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">axes</span>

 <span class="c1"># clearer</span>
<span class="k">def</span> <span class="nf">axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span> <span class="c1"># clone the axis</span>
        <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="c1"># single-element list</span>
</pre></div>
</div>
<ul ><li >Know your builtins : You should at least have a basic understanding of all
the Python builtins (<a href="http://docs.python.org/library/functions.html" class="external reference">http://docs.python.org/library/functions.html</a>)</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="n">my_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="c1"># very very redundant</span>
<span class="n">value</span><span class="o">=</span> <span class="n">my_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span> <span class="c1"># good</span>
</pre></div>
</div>
<p >Also, <code >if 'key' in my_dict</code> and <code >if my_dict.get('key')</code> have very different
meaning, be sure that you're using the right one.</p><ul ><li >Learn list comprehensions : Use list comprehension, dict comprehension, and
basic manipulation using <code >map</code>, <code >filter</code>, <code >sum</code>, ... They make the code
easier to read.</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># not very good</span>
<span class="n">cube</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
        <span class="n">cube</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
<span class="c1"># better</span>
<span class="n">cube</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">res</span><span class="p">]</span>
</pre></div>
</div>
<ul ><li >Collections are booleans too : In python, many objects have &quot;boolean-ish&quot; value
when evaluated in a boolean context (such as an if). Among these are collections
(lists, dicts, sets, ...) which are &quot;falsy&quot; when empty and &quot;truthy&quot; when containing
items:</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="nb">bool</span><span class="p">([])</span> <span class="ow">is</span> <span class="bp">False</span>
<span class="nb">bool</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span> <span class="ow">is</span> <span class="bp">True</span>
<span class="nb">bool</span><span class="p">([</span><span class="bp">False</span><span class="p">])</span> <span class="ow">is</span> <span class="bp">True</span>
</pre></div>
</div>
<p >So, you can write <code >if some_collection:</code> instead of <code >if len(some_collection):</code>.</p><ul ><li >Iterate on iterables</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># creates a temporary list and looks bar</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">my_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="s2">&quot;do something...&quot;</span>
<span class="c1"># better</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">my_dict</span><span class="p">:</span>
        <span class="s2">&quot;do something...&quot;</span>
<span class="c1"># creates a temporary list</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">my_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="s2">&quot;do something...&quot;</span>
<span class="c1"># only iterates</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">my_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="s2">&quot;do something...&quot;</span>
</pre></div>
</div>
<ul ><li >Use dict.setdefault</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># longer.. harder to read</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">element</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="n">values</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">values</span><span class="p">[</span><span class="n">element</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other_value</span><span class="p">)</span>

<span class="c1"># better.. use dict.setdefault method</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    <span class="n">values</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other_value</span><span class="p">)</span>
</pre></div>
</div>
<ul ><li >As a good developper, document your code (docstring on methods, simple
comments for tricky part of code)</li><li >In additions to these guidelines, you may also find the following link
interesting: <a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html" class="external reference">http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html</a>
(a little bit outdated, but quite relevant)</li></ul></section><section id="programming-in-odoo"><h3 >Programming in Odoo</h3><ul ><li >Avoid to create generators and decorators: only use the ones provided by
the Odoo API.</li><li >As in python, use <code >filtered</code>, <code >mapped</code>, <code >sorted</code>, ... methods to
ease code reading and performance.</li></ul></section><section id="make-your-method-works-in-batch"><h4 >Make your method works in batch</h4><p >When adding a function, make sure it can process multiple records. Typically,
such method is decorated with <code >api.multi</code> decorator (or takes a list of <em >id</em>,
if written in old api). Then you will have to iterate on <code >self</code> to treat each
record.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@api.multi</span>
<span class="k">def</span> <span class="nf">my_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">do_cool_stuff</span><span class="p">()</span>
</pre></div>
</div>
<p >Avoid to use <code >api.one</code>  decorator : this will probably not do what you expected,
and extending a such method is not as easy than a <em >api.multi</em> method, since it
returns a list of result (ordered by recordset ids).</p><p >For performance issue, when developping a 'stat button' (for instance), do not
perform a <code >search</code> or a <code >search_count</code> in a loop in a <code >api.multi</code> method. It
is recommended to use <code >read_group</code> method, to compute all value in only one request.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@api.multi</span>
<span class="k">def</span> <span class="nf">_compute_equipment_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="sd">&quot;&quot;&quot; Count the number of equipement per category &quot;&quot;&quot;</span>
    <span class="n">equipment_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;hr.equipment&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">read_group</span><span class="p">([(</span><span class="s1">&#39;category_id&#39;</span><span class="p">,</span> <span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">)],</span> <span class="p">[</span><span class="s1">&#39;category_id&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;category_id&#39;</span><span class="p">])</span>
    <span class="n">mapped_data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;category_id&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="s1">&#39;category_id_count&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">equipment_data</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">category</span><span class="o">.</span><span class="n">equipment_count</span> <span class="o">=</span> <span class="n">mapped_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</section><section id="propagate-the-context"><h4 >Propagate the context</h4><p >In new API, the context is a <code >frozendict</code> that cannot be modified. To call
a method with a different context, the <code >with_context</code> method should be used :</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">new_context</span><span class="p">)</span><span class="o">.</span><span class="n">do_stuff</span><span class="p">()</span> <span class="c1"># all the context is replaced</span>
<span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="o">**</span><span class="n">additionnal_context</span><span class="p">)</span><span class="o">.</span><span class="n">do_other_stuff</span><span class="p">()</span> <span class="c1"># additionnal_context values override native context ones</span>
</pre></div>
</div>
<p >Passing parameter in context can have dangerous side-effects. Since the values
are propagated automatically, some behavior can appears. Calling <code >create()</code>
method of a model with <em >default_my_field</em> key in context will set the default
value of <em >my_field</em> for the concerned model. But if curing this creation, other
object (such as sale.order.line, on sale.order creation) having a field
name <em >my_field</em>, their default value will be set too.</p><p >If you need to create a key context influencing the behavior of some object,
choice a good name, and eventually prefix it by the name of the module to
isolate its impact. A good example are the keys of <code >mail</code> module :
<em >mail_create_nosubscribe</em>, <em >mail_notrack</em>, <em >mail_notify_user_signature</em>, ...</p></section><section id="do-not-bypass-the-orm"><h4 >Do not bypass the ORM</h4><p >You should never use the database cursor directly when the ORM can do the same
thing! By doing so you are bypassing all the ORM features, possibly the
transactions, access rights and so on.</p><p >And chances are that you are also making the code harder to read and probably
less secure.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># very very wrong</span>
<span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id FROM auction_lots WHERE auction_id in (&#39;</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">ids</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;) AND state=</span><span class="si">%s</span><span class="s1"> AND obj_price &gt; 0&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;draft&#39;</span><span class="p">,))</span>
<span class="n">auction_lots_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>

<span class="c1"># no injection, but still wrong</span>
<span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id FROM auction_lots WHERE auction_id in </span><span class="si">%s</span><span class="s1"> &#39;</span>\
           <span class="s1">&#39;AND state=</span><span class="si">%s</span><span class="s1"> AND obj_price &gt; 0&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ids</span><span class="p">),</span> <span class="s1">&#39;draft&#39;</span><span class="p">,))</span>
<span class="n">auction_lots_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>

<span class="c1"># better</span>
<span class="n">auction_lots_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">([(</span><span class="s1">&#39;auction_id&#39;</span><span class="p">,</span><span class="s1">&#39;in&#39;</span><span class="p">,</span><span class="n">ids</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;draft&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;obj_price&#39;</span><span class="p">,</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span>
</pre></div>
</div>
</section><section id="no-sql-injections-please"><h4 >No SQL injections, please !</h4><p >Care must be taken not to introduce SQL injections vulnerabilities when using
manual SQL queries. The vulnerability is present when user input is either
incorrectly filtered or badly quoted, allowing an attacker to introduce
undesirable clauses to a SQL query (such as circumventing filters or
executing UPDATE or DELETE commands).</p><p >The best way to be safe is to never, NEVER use Python string concatenation (+)
or string parameters interpolation (%) to pass variables to a SQL query string.</p><p >The second reason, which is almost as important, is that it is the job of the
database abstraction layer (psycopg2) to decide how to format query parameters,
not your job! For example psycopg2 knows that when you pass a list of values
it needs to format them as a comma-separated list, enclosed in parentheses !</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># the following is very bad:</span>
<span class="c1">#   - it&#39;s a SQL injection vulnerability</span>
<span class="c1">#   - it&#39;s unreadable</span>
<span class="c1">#   - it&#39;s not your job to format the list of ids</span>
<span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT distinct child_id FROM account_account_consol_rel &#39;</span> <span class="o">+</span>
           <span class="s1">&#39;WHERE parent_id IN (&#39;</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">ids</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>

<span class="c1"># better</span>
<span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT DISTINCT child_id &#39;</span>\
           <span class="s1">&#39;FROM account_account_consol_rel &#39;</span>\
           <span class="s1">&#39;WHERE parent_id IN </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
           <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ids</span><span class="p">),))</span>
</pre></div>
</div>
<p >This is very important, so please be careful also when refactoring, and most
importantly do not copy these patterns!</p><p >Here is a memorable example to help you remember what the issue is about (but
do not copy the code there). Before continuing, please be sure to read the
online documentation of pyscopg2 to learn of to use it properly:</p><ul ><li >The problem with query parameters (<a href="http://initd.org/psycopg/docs/usage.html#the-problem-with-the-query-parameters" class="external reference">http://initd.org/psycopg/docs/usage.html#the-problem-with-the-query-parameters</a>)</li><li >How to pass parameters with psycopg2 (<a href="http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries" class="external reference">http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries</a>)</li><li >Advanced parameter types (<a href="http://initd.org/psycopg/docs/usage.html#adaptation-of-python-values-to-sql-types" class="external reference">http://initd.org/psycopg/docs/usage.html#adaptation-of-python-values-to-sql-types</a>)</li></ul></section><section id="keep-your-methods-short-simple-when-possible"><h4 >Keep your methods short/simple when possible</h4><p >Functions and methods should not contain too much logic: having a lot of small
and simple methods is more advisable than having few large and complex methods.
A good rule of thumb is to split a method as soon as:
- it has more than one responsibility (see <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle" class="external reference">http://en.wikipedia.org/wiki/Single_responsibility_principle</a>)
- it is too big to fit on one screen.</p><p >Also, name your functions accordingly: small and properly named functions are the starting point of readable/maintainable code and tighter documentation.</p><p >This recommendation is also relevant for classes, files, modules and packages. (See also <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity" class="external reference">http://en.wikipedia.org/wiki/Cyclomatic_complexity</a>)</p></section><section id="never-commit-the-transaction"><h4 >Never commit the transaction</h4><p >The Odoo framework is in charge of providing the transactional context for
all RPC calls. The principle is that a new database cursor is opened at the
beginning of each RPC call, and committed when the call has returned, just
before transmitting the answer to the RPC client, approximately like this:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_name</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">db</span><span class="p">,</span> <span class="n">pool</span> <span class="o">=</span> <span class="n">pooler</span><span class="o">.</span><span class="n">get_db_and_pool</span><span class="p">(</span><span class="n">db_name</span><span class="p">)</span>
    <span class="c1"># create transaction cursor</span>
    <span class="n">cr</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">execute_cr</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="n">cr</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span> <span class="c1"># all good, we commit</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">cr</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span> <span class="c1"># error, rollback everything atomically</span>
        <span class="k">raise</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">cr</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># always close cursor opened manually</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
<p >If any error occurs during the execution of the RPC call, the transaction is
rolled back atomically, preserving the state of the system.</p><p >Similarly, the system also provides a dedicated transaction during the execution
of tests suites, so it can be rolled back or not depending on the server
startup options.</p><p >The consequence is that if you manually call <code >cr.commit()</code> anywhere there is
a very high chance that you will break the system in various ways, because you
will cause partial commits, and thus partial and unclean rollbacks, causing
among others:</p><ol ><li >inconsistent business data, usually data loss</li><li >workflow desynchronization, documents stuck permanently</li><li >tests that can't be rolled back cleanly, and will start polluting the
database, and triggering error (this is true even if no error occurs
during the transaction)</li></ol><dl ><dt >Here is the very simple rule:</dt><dd ><p >You should <strong >NEVER</strong> call <code >cr.commit()</code> yourself, <strong >UNLESS</strong> you have
created your own database cursor explicitly! And the situations where you
need to do that are exceptional!</p><p >And by the way if you did create your own cursor, then you need to handle
error cases and proper rollback, as well as properly close the cursor when
you're done with it.</p></dd></dl><p >And contrary to popular belief, you do not even need to call <code >cr.commit()</code>
in the following situations:
- in the <code >_auto_init()</code> method of an <em >models.Model</em> object: this is taken
care of by the addons initialization method, or by the ORM transaction when
creating custom models
- in reports: the <code >commit()</code> is handled by the framework too, so you can
update the database even from within a report
- within <em >models.Transient</em> methods: these methods are called exactly like
regular <em >models.Model</em> ones, within a transaction and with the corresponding
<code >cr.commit()/rollback()</code> at the end
- etc. (see general rule above if you have in doubt!)</p><p >All <code >cr.commit()</code> calls outside of the server framework from now on must
have an <strong >explicit comment</strong> explaining why they are absolutely necessary, why
they are indeed correct, and why they do not break the transactions. Otherwise
they can and will be removed !</p></section><section id="use-translation-method-correctly"><h4 >Use translation method correctly</h4><p >Odoo uses a GetText-like method named &quot;underscore&quot; <code >_( )</code> to indicate that
a static string used in the code needs to be translated at runtime using the
language of the context. This pseudo-method is accessed within your code by
importing as follows:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">odoo.tools.translate</span> <span class="kn">import</span> <span class="n">_</span>
</pre></div>
</div>
<p >A few very important rules must be followed when using it, in order for it to
work and to avoid filling the translations with useless junk.</p><p >Basically, this method should only be used for static strings written manually
in the code, it will not work to translate field values, such as Product names,
etc. This must be done instead using the translate flag on the corresponding
field.</p><p >The rule is very simple: calls to the underscore method should always be in
the form <code >_('literal string')</code> and nothing else:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># good: plain strings</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;This record is locked!&#39;</span><span class="p">)</span>

<span class="c1"># good: strings with formatting patterns included</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Record </span><span class="si">%s</span><span class="s1"> cannot be modified!&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="n">record</span>

<span class="c1"># ok too: multi-line literal strings</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;This is a bad multiline example</span>
<span class="s2">             about record </span><span class="si">%s</span><span class="s2">!&quot;&quot;&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">record</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Record </span><span class="si">%s</span><span class="s1"> cannot be modified&#39;</span> \
          <span class="s1">&#39;after being validated!&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="n">record</span>

<span class="c1"># bad: tries to translate after string formatting</span>
<span class="c1">#      (pay attention to brackets!)</span>
<span class="c1"># This does NOT work and messes up the translations!</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Record </span><span class="si">%s</span><span class="s1"> cannot be modified!&#39;</span> <span class="o">%</span> <span class="n">record</span><span class="p">)</span>

<span class="c1"># bad: dynamic string, string concatenation, etc are forbidden!</span>
<span class="c1"># This does NOT work and messes up the translations!</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="n">que_rec</span><span class="p">[</span><span class="s1">&#39;question&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&#39; </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># bad: field values are automatically translated by the framework</span>
<span class="c1"># This is useless and will not work the way you think:</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Product </span><span class="si">%s</span><span class="s2"> is out of stock!&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">_</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="c1"># and the following will of course not work as already explained:</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Product </span><span class="si">%s</span><span class="s2"> is out of stock!&quot;</span> <span class="o">%</span> <span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># bad: field values are automatically translated by the framework</span>
<span class="c1"># This is useless and will not work the way you think:</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Product </span><span class="si">%s</span><span class="s2"> is not available!&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">_</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="c1"># and the following will of course not work as already explained:</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Product </span><span class="si">%s</span><span class="s2"> is not available!&quot;</span> <span class="o">%</span> <span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># Instead you can do the following and everything will be translated,</span>
<span class="c1"># including the product name if its field definition has the</span>
<span class="c1"># translate flag properly set:</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Product </span><span class="si">%s</span><span class="s2"> is not available!&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">product</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p >Also, keep in mind that translators will have to work with the literal values
that are passed to the underscore function, so please try to make them easy to
understand and keep spurious characters and formatting to a minimum. Translators
must be aware that formatting patterns such as %s or %d, newlines, etc. need
to be preserved, but it's important to use these in a sensible and obvious manner:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Bad: makes the translations hard to work with</span>
<span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="n">question</span> <span class="o">+</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;&#39; </span><span class="se">\n</span><span class="s2">Please enter an integer value &quot;</span><span class="p">)</span>

<span class="c1"># Better (pay attention to position of the brackets too!)</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Answer to question </span><span class="si">%s</span><span class="s2"> is not valid.</span><span class="se">\n</span><span class="s2">&quot;</span> \
          <span class="s2">&quot;Please enter an integer value.&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">question</span>
</pre></div>
</div>
<p >In general in Odoo, when manipulating strings, prefer <code >%</code> over <code >.format()</code>
(when only one variable to replace in a string), and prefer <code >%(varname)</code> instead
of position (when multiple variables have to be replaced). This makes the
translation easier for the community translators.</p></section><section id="symbols-and-conventions"><h3 >Symbols and Conventions</h3><ul ><li ><dl ><dt >Model name (using the dot notation, prefix by the module name) :</dt><dd ><ul ><li >When defining an Odoo Model : use singular form of the name (<em >res.partner</em>
and <em >sale.order</em> instead of <em >res.partnerS</em> and <em >saleS.orderS</em>)</li><li >When defining an Odoo Transient (wizard) : use <code >&lt;related_base_model&gt;.&lt;action&gt;</code>
where <em >related_base_model</em> is the base model (defined in <em >models/</em>) related
to the transient, and <em >action</em> is the short name of what the transient do.
For instance : <code >account.invoice.make</code>, <code >project.task.delegate.batch</code>, ...</li><li >When defining <em >report</em> model (SQL views e.i.) : use
<code >&lt;related_base_model&gt;.report.&lt;action&gt;</code>, based on the Transient convention.</li></ul></dd></dl></li><li >Odoo Python Class : use camelcase for code in api v8 (Object-oriented style),
underscore lowercase notation for old api (SQL style).</li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AccountInvoice</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">class</span> <span class="nc">account_invoice</span><span class="p">(</span><span class="n">osv</span><span class="o">.</span><span class="n">osv</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<ul ><li ><dl ><dt >Variable name :</dt><dd ><ul ><li >use camelcase for model variable</li><li >use underscore lowercase notation for common variable.</li><li >since new API works with record or recordset instead of id list, don't
suffix variable name with <em >_id</em> or <em >_ids</em> if they not contain id or list
of id.</li></ul></dd></dl></li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ResPartner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span>
<span class="n">partners</span> <span class="o">=</span> <span class="n">ResPartner</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span>
<span class="n">partner_id</span> <span class="o">=</span> <span class="n">partners</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
</pre></div>
</div>
<ul ><li ><code >One2Many</code> and <code >Many2Many</code> fields should always have <em >_ids</em> as suffix (example: sale_order_line_ids)</li><li ><code >Many2One</code> fields should have <em >_id</em> as suffix (example : partner_id, user_id, ...)</li><li ><dl ><dt >Method conventions</dt><dd ><ul ><li >Compute Field : the compute method pattern is <em >_compute_&lt;field_name&gt;</em></li><li >Search method : the search method pattern is <em >_search_&lt;field_name&gt;</em></li><li >Default method : the default method pattern is <em >_default_&lt;field_name&gt;</em></li><li >Onchange method : the onchange method pattern is <em >_onchange_&lt;field_name&gt;</em></li><li >Constraint method : the constraint method pattern is <em >_check_&lt;constraint_name&gt;</em></li><li >Action method : an object action method is prefix with <em >action_</em>. Its decorator is
<code >@api.multi</code>, but since it use only one record, add <code >self.ensure_one()</code>
at the beginning of the method.</li></ul></dd></dl></li><li ><dl ><dt >In a Model attribute order should be</dt><dd ><ol ><li >Private attributes (<code >_name</code>, <code >_description</code>, <code >_inherit</code>, ...)</li><li >Default method and <code >_default_get</code></li><li >Field declarations</li><li >Compute and search methods in the same order as field declaration</li><li >Constrains methods (<code >@api.constrains</code>) and onchange methods (<code >@api.onchange</code>)</li><li >CRUD methods (ORM overrides)</li><li >Action methods</li><li >And finally, other business methods.</li></ol></dd></dl></li></ul><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Event</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># Private attributes</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;event.event&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Event&#39;</span>

    <span class="c1"># Default methods</span>
    <span class="k">def</span> <span class="nf">_default_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="c1"># Fields declaration</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">_default_name</span><span class="p">)</span>
    <span class="n">seats_reserved</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">oldname</span><span class="o">=</span><span class="s1">&#39;register_current&#39;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s1">&#39;Reserved Seats&#39;</span><span class="p">,</span>
        <span class="n">store</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_seats&#39;</span><span class="p">)</span>
    <span class="n">seats_available</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">oldname</span><span class="o">=</span><span class="s1">&#39;register_avail&#39;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s1">&#39;Available Seats&#39;</span><span class="p">,</span>
        <span class="n">store</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_seats&#39;</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Price&#39;</span><span class="p">)</span>

    <span class="c1"># compute and search fields, in the same order of fields declaration</span>
    <span class="nd">@api.multi</span>
    <span class="nd">@api.depends</span><span class="p">(</span><span class="s1">&#39;seats_max&#39;</span><span class="p">,</span> <span class="s1">&#39;registration_ids.state&#39;</span><span class="p">,</span> <span class="s1">&#39;registration_ids.nb_register&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_compute_seats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="c1"># Constraints and onchanges</span>
    <span class="nd">@api.constrains</span><span class="p">(</span><span class="s1">&#39;seats_max&#39;</span><span class="p">,</span> <span class="s1">&#39;seats_available&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_check_seats_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="nd">@api.onchange</span><span class="p">(</span><span class="s1">&#39;date_begin&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_onchange_date_begin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="c1"># CRUD methods (and name_get, name_search, ...) overrides</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="c1"># Action methods</span>
    <span class="nd">@api.multi</span>
    <span class="k">def</span> <span class="nf">action_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_one</span><span class="p">()</span>
        <span class="o">...</span>

    <span class="c1"># Business methods</span>
    <span class="k">def</span> <span class="nf">mail_user_confirm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</section><section id="javascript-and-css"><h2 >Javascript and CSS</h2><p ><strong >For javascript :</strong></p><ul ><li ><code >use strict;</code> is recommended for all javascript files</li><li >Use a linter (jshint, ...)</li><li >Never add minified Javascript Libraries</li><li >Use camelcase for class declaration</li><li >Unless your code is supposed to run on every page, target specific pages
using the <code >if_dom_contains</code> function of website module. Target an
element which is specific to the pages your code needs to run on
using JQuery.</li></ul><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">openerp</span><span class="p">.</span><span class="nx">website</span><span class="p">.</span><span class="nx">if_dom_contains</span><span class="p">(</span><span class="s1">&#39;.jquery_class_selector&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="cm">/*your code here*/</span>
<span class="p">});</span>
</pre></div>
</div>
<p ><strong >For CSS :</strong></p><ul ><li >Prefix all your classes with <em >o_&lt;module_name&gt;</em> where <em >module_name</em> is the
technical name of the module ('sale', 'im_chat', ...) or the main route
reserved by the module (for website module mainly, i.e. : 'o_forum' for
<em >website_forum</em> module). The only exception for this rule is the
webclient: it simply uses <em >o_</em> prefix.</li><li >Avoid using id</li><li >Use Bootstrap native classes</li><li >Use underscore lowercase notation to name class</li></ul></section><section id="git"><h2 >Git</h2></section><section id="commit-message"><h3 >Commit message</h3><p >Prefix your commit with</p><ul ><li ><strong >[IMP]</strong> for improvements</li><li ><strong >[FIX]</strong> for bug fixes</li><li ><strong >[REF]</strong> for refactoring</li><li ><strong >[ADD]</strong> for adding new resources</li><li ><strong >[REM]</strong> for removing of resources</li><li ><strong >[MOV]</strong> for moving files (Do not change content of moved file, otherwise
Git will loose track, and the history will be lost !), or simply moving code
from a file to another one.</li><li ><strong >[MERGE]</strong> for merge commits (only for forward/back-port)</li><li ><strong >[CLA]</strong> for signing the Odoo Individual Contributor License</li></ul><p >Then, in the message itself, specify the part of the code impacted by
your changes (module name, lib, transversal object, ...) and a description
of the changes.</p><ul ><li >Always include a meaningful commit message: it should be self explanatory
(long enough) including the name of the module that has been changed and the
reason behind the change. Do not use single words like &quot;bugfix&quot; or
&quot;improvements&quot;.</li><li >Avoid commits which simultaneously impact multiple modules. Try to
split into different commits where impacted modules are different
(It will be helpful if we need to revert a module separately).</li></ul><div class="highlight-text"><div class="highlight"><pre><span></span>[FIX] website, website_mail: remove unused alert div, fixes look of input-group-btn

Bootstrap&#39;s CSS depends on the input-group-btn
element being the first/last child of its parent.
This was not the case because of the invisible
and useless alert.

[IMP] fields: reduce memory footprint of list/set field attributes

[REF] web: add module system to the web client

This commit introduces a new module system for the javascript code.
Instead of using global ...
</pre></div>
</div>
<div role="alert" class="alert-info alert"><p class="alert-title">Note</p><p >Use the long description to explain the <em >why</em> not the
<em >what</em>, the <em >what</em> can be seen in the diff</p></div></section>

          </article>
        </div>
        
        <div id="mask"></div>
      </main>
    </div>
  </div>

  <div class="floating_action_container">
    <a id="floating_action" class="ripple" href="#">
      <i class="mdi-action-explore"></i>
    </a>
    <div id="floating_action_menu">
      <span class="bubble"></span>
      <ul class="list-group content">
        <li class="list-group-item ripple"><a>Cras justo odio</a></li>
        <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
        <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
        <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
        <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
      </ul>
    </div>
  </div>
  <footer class="o_footer_effect">
            <div id="footer" class="container o_not_editable">
                <span class="o_logo o_logo_inverse center-block o_footer_logo"></span>
                <div class="row">
                    <div class="col-xs-12">
                        <hr>
						<p>Перевод документации при поддержке <a href="https://www.yartsev.by/" target="_blank">Ярцев и компаньоны</a> и <a href="https://www.udelta.ru" target="_blank">Udelta</a></p>
                        <hr>
                        <p>
                            <small>Odoo - это набор бизнес-приложений с открытым исходным кодом, которые охватывают все потребности вашей компании: CRM, интернет магазин, бухгалтерский учет, складской учет, POS терминал, управление проектами и т.д. <br> <br>
В то же время полноценное внедрение Odoo может быть очень простым и включать полную интеграцию с вашим предприятием.</small>
                        </p>
                    </div>
                </div>
            </div>

            <div class="o_footer_bottom o_not_editable">
                <div class="container">
                    <a class="small" href="https://www.odoo.com/page/website-builder">Website made with <span class="o_logo o_logo_inverse o_logo_15"></span></a>
                    <div class="social-links pull-right">
                        <a href="https://www.odoo.com/web/about/facebook">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="https://www.odoo.com/web/about/twitter">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="https://www.odoo.com/web/about/linkedin">
                            <i class="fa fa-linkedin"></i>
                        </a>
                        <a href="mailto:info@odoo.com">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>
        </footer><!-- Yandex.Metrika counter --> <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter44508703 = new Ya.Metrika({ id:44508703, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/44508703" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
  </body>
</html>