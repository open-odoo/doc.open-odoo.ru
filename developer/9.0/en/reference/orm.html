<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="English">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <title>ORM API &mdash; Перевод на русский язык документации Odoo 9.0</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/patchqueue.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/patchqueue.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/doc.js"></script>
    <script type="text/javascript" src="../_static/jquery.noconflict.js"></script>
    <script type="text/javascript" src="https://yastatic.net/es5-shims/0.0.2/es5-shims.min.js"></script>
    <script type="text/javascript" src="https://yastatic.net/share2/share.js"></script>
    <link rel="top" title="Перевод на русский язык документации Odoo 9.0" href="../index.html" />
    <link rel="up" title="Reference" href="../reference.html" />
    <link rel="next" title="Data Files" href="data.html" />
    <link rel="prev" title="Reference" href="../reference.html" /> 
  </head>
  <body role="document"><header class="o_main_header o_has_sub_nav o_inverted ">
    <div class="o_main_header_main">
      <a class="pull-left o_logo" href="/"></a>
      <a href="#" class="o_mobile_menu_toggle visible-xs-block pull-right">
        <span class="sr-only">Toggle navigation</span>
        <span class="mdi-navigation-menu"></span>
      </a>
      <ul class="o_primary_nav">
        <li><a href="/">Документация</a></li>
      </ul>
    </div>
    <nav class="navbar o_sub_nav">
      <div class="container">
        <div class="navbar-header visible-xs">
            <button type="button" class="navbar-toggle collapsed text-left btn-block" data-toggle="collapse" data-target="#o_sub-menu" aria-expanded="false">
              Меню
              <span class="mdi-hardware-keyboard-arrow-down pull-right"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="o_sub-menu">
          <ol class="o_breadcrumb breadcrumb nav navbar-left">
              
              
              





    
        
            <li><a href="../index.html">Документация  (9.0)</a></li>
        
    
    <li class="active"><a href="#">ORM API</a></li>

              
          </ol>

          <ul class="navbar-nav navbar-right nav o_sub_nav_actions">
            
              <li class="divider"></li>
            

            
             

<li class="languages dropdown">
    <a class="dropdown-toggle" href="#" data-toggle="dropdown">
        English
    </a>
    <ul class="dropdown-menu" role="menu">
        
            <li><a href="/developer/9.0/ru/reference/orm.html">Русский</a></li>
        
    </ul>
</li>



<li class="versions dropdown">
    <a class="dropdown-toggle" href="#" data-toggle="dropdown">
        9.0
    </a>
    <ul class="dropdown-menu" role="menu">
        
            <li><a href="/developer/8.0/en/reference/orm.html">8.0</a></li>
        
            <li><a href="/developer/10.0/en/reference/orm.html">10.0</a></li>
        
            <li><a href="/developer/11.0/en/reference/orm.html">11.0</a></li>
        
    </ul>
</li>

            
          </ul>

          <ul class="nav navbar-nav navbar-right">
            
              <li class="divider"></li>
            

            
            

<li><a href="/user/9.0/en/">Пользователю</a></li>
<li><a href="/developer/9.0/en/">Разработчику</a></li>
<li><a href="/developer/9.0/en/api_integration.html">API</a></li>
<li><a href="/developer/9.0/en/setup/install.html">Установка</a></li>
            

            
              <li class="divider"></li>
            
          </ul>
        </div>
      </div>
    </nav>
  </header><div id="wrap" class="">
    
    
    
    <figure class="card top has_banner">
      <span class="card-img" style="background-image: url('../_static/banners/orm_api.jpg');"></span>
      <div class="container text-center">
        <h1> ORM API - Odoo 9.0 </h1>
      </div>
    </figure>
    
    
    
    <div class="container ">
      <main class="container-fluid ">
        
        <div class="row">
          
          <aside>
            <div class="navbar-aside text-center">
              <ul class="list-group text-left nav"><li class="list-group-item"><a href="#recordsets" class="ripple internal reference">Recordsets</a><ul ><li class="list-group-item"><a href="#field-access" class="ripple internal reference">Field access</a></li><li class="list-group-item"><a href="#set-operations" class="ripple internal reference">Set operations</a></li><li class="list-group-item"><a href="#other-recordset-operations" class="ripple internal reference">Other recordset operations</a></li></ul></li><li class="list-group-item"><a href="#environment" class="ripple internal reference">Environment</a><ul ><li class="list-group-item"><a href="#altering-the-environment" class="ripple internal reference">Altering the environment</a></li></ul></li><li class="list-group-item"><a href="#common-orm-methods" class="ripple internal reference">Common ORM methods</a></li><li class="list-group-item"><a href="#creating-models" class="ripple internal reference">Creating Models</a><ul ><li class="list-group-item"><a href="#computed-fields" class="ripple internal reference">Computed fields</a><ul ><li class="list-group-item"><a href="#related-fields" class="ripple internal reference">Related fields</a></li></ul></li><li class="list-group-item"><a href="#onchange-updating-ui-on-the-fly" class="ripple internal reference">onchange: updating UI on the fly</a></li><li class="list-group-item"><a href="#low-level-sql" class="ripple internal reference">Low-level SQL</a></li></ul></li><li class="list-group-item"><a href="#compatibility-between-new-api-and-old-api" class="ripple internal reference">Compatibility between new API and old API</a></li><li class="list-group-item"><a href="#model-reference" class="ripple internal reference">Model Reference</a></li><li class="list-group-item"><a href="#module-openerp.api" class="ripple internal reference">Method decorators</a></li><li class="list-group-item"><a href="#fields" class="ripple internal reference">Fields</a><ul ><li class="list-group-item"><a href="#basic-fields" class="ripple internal reference">Basic fields</a></li><li class="list-group-item"><a href="#relational-fields" class="ripple internal reference">Relational fields</a></li></ul></li><li class="list-group-item"><a href="#inheritance-and-extension" class="ripple internal reference">Inheritance and extension</a><ul ><li class="list-group-item"><a href="#classical-inheritance" class="ripple internal reference">Classical inheritance</a></li><li class="list-group-item"><a href="#extension" class="ripple internal reference">Extension</a></li><li class="list-group-item"><a href="#delegation" class="ripple internal reference">Delegation</a></li></ul></li><li class="list-group-item"><a href="#domains" class="ripple internal reference">Domains</a></li><li class="list-group-item"><a href="#porting-from-the-old-api-to-the-new-api" class="ripple internal reference">Porting from the old API to the new API</a><ul ><li class="list-group-item"><a href="#automatic-bridging-of-old-api-methods" class="ripple internal reference">Automatic bridging of old API methods</a></li></ul></li></ul>
              
              
              <p class="gith-container"><a href="https://github.com/odoo/odoo/edit/9.0/doc/reference/orm.rst" class="gith-link" target="_blank">
                  Оригинал на GitHub
              </a></p>
              
            </div>
          </aside>
          
          <article class="doc-body ">
            <div class="ya-share2" data-services="collections,vkontakte,facebook,odnoklassniki,moimir,gplus,twitter,linkedin,viber,whatsapp,skype,telegram"></div>
            
            
  <section id="orm-api"><i id="reference-orm"></i></section><section id="recordsets"><h2 >Recordsets</h2><div class="versionadded"><p ><span class="versionmodified">New in version 8.0: </span>This page documents the New API added in Odoo 8.0 which should be the
primary development API going forward. It also provides information about
porting from or bridging with the &quot;old API&quot; of versions 7 and earlier, but
does not explicitly document that API. See the old documentation for that.</p></div><p >Interaction with models and records is performed through recordsets, a sorted
set of records of the same model.</p><div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p >contrary to what the name implies, it is currently possible for
recordsets to contain duplicates. This may change in the future.</p></div><p >Methods defined on a model are executed on a recordset, and their <code >self</code> is
a recordset:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;a.model&#39;</span>
    <span class="k">def</span> <span class="nf">a_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># self can be anywhere between 0 records and all records in the</span>
        <span class="c1"># database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_operation</span><span class="p">()</span>
</pre></div>
</div>
<p >Iterating on a recordset will yield new sets of <em >a single record</em>
(&quot;singletons&quot;), much like iterating on a Python string yields strings of a
single characters:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">print</span> <span class="bp">self</span> <span class="c1"># =&gt; a.model(1, 2, 3, 4, 5)</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="nb">print</span> <span class="n">record</span> <span class="c1"># =&gt; a.model(1), then a.model(2), then a.model(3), ...</span>
</pre></div>
</div>
</section><section id="field-access"><h3 >Field access</h3><p >Recordsets provide an &quot;Active Record&quot; interface: model fields can be read and
written directly from the record, but only on singletons (single-record
recordsets). Setting a field's value triggers an update to the database:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">name</span>
<span class="go">Example Name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">company_id</span><span class="o">.</span><span class="n">name</span>
<span class="go">Company Name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Bob&quot;</span>
</pre></div>
</div>
<p >Trying to read or write a field on multiple records will raise an error.</p><p >Accessing a relational field (<a href="#openerp.fields.Many2one" class="internal reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a>,
<a href="#openerp.fields.One2many" class="internal reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>, <a href="#openerp.fields.Many2many" class="internal reference" title="openerp.fields.Many2many"><code class="py xref py-class">Many2many</code></a>)
<em >always</em> returns a recordset, empty if the field is not set.</p><div role="alert" class="alert-danger alert"><p class="alert-title">Danger</p><p >each assignment to a field triggers a database update, when setting
multiple fields at the same time or setting fields on multiple records
(to the same value), use <a href="#openerp.models.Model.write" class="internal alert-link reference" title="openerp.models.Model.write"><code class="py py-meth xref">write()</code></a>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># 3 * len(records) database updates</span>
<span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
    <span class="n">record</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">record</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">record</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c1"># len(records) database updates</span>
<span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
    <span class="n">record</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>

<span class="c1"># 1 database update</span>
<span class="n">records</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</pre></div>
</div>
</div></section><section id="set-operations"><h3 >Set operations</h3><p >Recordsets are immutable, but sets of the same model can be combined using
various set operations, returning new recordsets. Set operations do <em >not</em>
preserve order.</p><ul ><li ><code >record in set</code> returns whether <code >record</code> (which must be a 1-element
recordset) is present in <code >set</code>. <code >record not in set</code> is the inverse
operation</li><li ><code >set1 &lt;= set2</code> and <code >set1 &lt; set2</code> return whether <code >set1</code> is a subset
of <code >set2</code> (resp. strict)</li><li ><code >set1 &gt;= set2</code> and <code >set1 &gt; set2</code> return whether <code >set1</code> is a superset
of <code >set2</code> (resp. strict)</li><li ><code >set1 | set2</code> returns the union of the two recordsets, a new recordset
containing all records present in either source</li><li ><code >set1 &amp; set2</code> returns the intersection of two recordsets, a new recordset
containing only records present in both sources</li><li ><code >set1 - set2</code> returns a new recordset containing only records of <code >set1</code>
which are <em >not</em> in <code >set2</code></li></ul></section><section id="other-recordset-operations"><h3 >Other recordset operations</h3><p >Recordsets are iterable so the usual Python tools are available for
transformation (<a href="https://docs.python.org/2/library/functions.html#map" class="external reference" title="(in Python v2.7)"><code >map()</code></a>, <a href="https://docs.python.org/2/library/functions.html#sorted" class="external reference" title="(in Python v2.7)"><code >sorted()</code></a>,
<a href="https://docs.python.org/2/library/itertools.html#itertools.ifilter" class="external reference" title="(in Python v2.7)"><code class="py xref py-func">ifilter()</code></a>, ...) however these return either a
<code class="py xref py-class">list</code> or an <a href="https://docs.python.org/2/glossary.html#term-iterator" class="external reference" title="(in Python v2.7)"><span >iterator</span></a>, removing the ability to
call methods on their result, or to use set operations.</p><p >Recordsets therefore provide these operations returning recordsets themselves
(when possible):</p><dl ><dt ><a href="#openerp.models.Model.filtered" class="internal reference" title="openerp.models.Model.filtered"><code class="py py-meth xref">filtered()</code></a></dt><dd ><p >returns a recordset containing only records satisfying the provided
predicate function. The predicate can also be a string to filter by a
field being true or false:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># only keep records whose company is the current user&#39;s</span>
<span class="n">records</span><span class="o">.</span><span class="n">filtered</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">company_id</span> <span class="o">==</span> <span class="n">user</span><span class="o">.</span><span class="n">company_id</span><span class="p">)</span>

<span class="c1"># only keep records whose partner is a company</span>
<span class="n">records</span><span class="o">.</span><span class="n">filtered</span><span class="p">(</span><span class="s2">&quot;partner_id.is_company&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.models.Model.sorted" class="internal reference" title="openerp.models.Model.sorted"><code class="py py-meth xref">sorted()</code></a></dt><dd ><p >returns a recordset sorted by the provided key function. If no key
is provided, use the model's default sort order:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># sort records by name</span>
<span class="n">records</span><span class="o">.</span><span class="n">sorted</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.models.Model.mapped" class="internal reference" title="openerp.models.Model.mapped"><code class="py py-meth xref">mapped()</code></a></dt><dd ><p >applies the provided function to each record in the recordset, returns
a recordset if the results are recordsets:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># returns a list of summing two fields for each record in the set</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">field1</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">field2</span><span class="p">)</span>
</pre></div>
</div>
<p >The provided function can be a string to get field values:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># returns a list of names</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>

<span class="c1"># returns a recordset of partners</span>
<span class="n">record</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">)</span>

<span class="c1"># returns the union of all partner banks, with duplicates removed</span>
<span class="n">record</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;partner_id.bank_ids&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl></section><section id="environment"><h2 >Environment</h2><p >The <code class="py xref py-class">Environment</code> stores various contextual data used by
the ORM: the database cursor (for database queries), the current user
(for access rights checking) and the current context (storing arbitrary
metadata). The environment also stores caches.</p><p >All recordsets have an environment, which is immutable, can be accessed
using <code class="py xref py-attr">env</code> and gives access to the current user
(<code class="py xref py-attr">user</code>), the cursor
(<code class="py xref py-attr">cr</code>) or the context
(<code class="py xref py-attr">context</code>):</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">records</span><span class="o">.</span><span class="n">env</span>
<span class="go">&lt;Environment object ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">records</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">user</span>
<span class="go">res.user(3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">records</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span>
<span class="go">&lt;Cursor object ...)</span>
</pre></div>
</div>
<p >When creating a recordset from an other recordset, the environment is
inherited. The environment can be used to get an empty recordset in an
other model, and query that model:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span>
<span class="go">res.partner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">([[</span><span class="s1">&#39;is_company&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;customer&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">]])</span>
<span class="go">res.partner(7, 18, 12, 14, 17, 19, 8, 31, 26, 16, 13, 20, 30, 22, 29, 15, 23, 28, 74)</span>
</pre></div>
</div>
</section><section id="altering-the-environment"><h3 >Altering the environment</h3><p >The environment can be customized from a recordset. This returns a new
version of the recordset using the altered environment.</p><dl ><dt ><a href="#openerp.models.Model.sudo" class="internal reference" title="openerp.models.Model.sudo"><code class="py py-meth xref">sudo()</code></a></dt><dd ><p >creates a new environment with the provided user set, uses the
administrator if none is provided (to bypass access rights/rules in safe
contexts), returns a copy of the recordset it is called on using the
new environment:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># create partner object as administrator</span>
<span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sudo</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;A Partner&quot;</span><span class="p">})</span>

<span class="c1"># list partners visible by the &quot;public&quot; user</span>
<span class="n">public</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="s1">&#39;base.public_user&#39;</span><span class="p">)</span>
<span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sudo</span><span class="p">(</span><span class="n">public</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">([])</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.models.Model.with_context" class="internal reference" title="openerp.models.Model.with_context"><code class="py py-meth xref">with_context()</code></a></dt><dd ><ol ><li >can take a single positional parameter, which replaces the current
environment's context</li><li >can take any number of parameters by keyword, which are added to either
the current environment's context or the context set during step 1</li></ol><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># look for partner, or create one with specified timezone if none is</span>
<span class="c1"># found</span>
<span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">a_tz</span><span class="p">)</span><span class="o">.</span><span class="n">find_or_create</span><span class="p">(</span><span class="n">email_address</span><span class="p">)</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.models.Model.with_env" class="internal reference" title="openerp.models.Model.with_env"><code class="py py-meth xref">with_env()</code></a></dt><dd >replaces the existing environment entirely</dd></dl></section><section id="common-orm-methods"><h2 >Common ORM methods</h2><dl ><dt ><a href="#openerp.models.Model.search" class="internal reference" title="openerp.models.Model.search"><code class="py py-meth xref">search()</code></a></dt><dd ><p >Takes a <a href="#reference-orm-domains" class="internal reference"><span class="std std-ref">search domain</span></a>, returns a recordset
of matching records. Can return a subset of matching records (<code >offset</code>
and <code >limit</code> parameters) and be ordered (<code >order</code> parameter):</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># searches the current model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">([(</span><span class="s1">&#39;is_company&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;customer&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)])</span>
<span class="go">res.partner(7, 18, 12, 14, 17, 19, 8, 31, 26, 16, 13, 20, 30, 22, 29, 15, 23, 28, 74)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">([(</span><span class="s1">&#39;is_company&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)],</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Agrolait&#39;</span>
</pre></div>
</div>
<div role="alert" class="alert-info alert"><p class="alert-title">Tip</p><p >to just check if any record matches a domain, or count the number
of records which do, use
<a href="#openerp.models.Model.search_count" class="internal alert-link reference" title="openerp.models.Model.search_count"><code class="py py-meth xref">search_count()</code></a></p></div></dd><dt ><a href="#openerp.models.Model.create" class="internal reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a></dt><dd ><p >Takes a number of field values, and returns a recordset containing the
record created:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;New Name&quot;</span><span class="p">})</span>
<span class="go">res.partner(78)</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.models.Model.write" class="internal reference" title="openerp.models.Model.write"><code class="py py-meth xref">write()</code></a></dt><dd ><p >Takes a number of field values, writes them to all the records in its
recordset. Does not return anything:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;Newer Name&quot;</span><span class="p">})</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.models.Model.browse" class="internal reference" title="openerp.models.Model.browse"><code class="py py-meth xref">browse()</code></a></dt><dd ><p >Takes a database id or a list of ids and returns a recordset, useful when
record ids are obtained from outside Odoo (e.g. round-trip through
external system) or <a href="#reference-orm-oldapi" class="internal reference"><span class="std std-ref">when calling methods in the old API</span></a>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
<span class="go">res.partner(7, 18, 12)</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.models.Model.exists" class="internal reference" title="openerp.models.Model.exists"><code class="py py-meth xref">exists()</code></a></dt><dd ><p >Returns a new recordset containing only the records which exist in the
database. Can be used to check whether a record (e.g. obtained externally)
still exists:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The record has been deleted&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >or after calling a method which could have removed some records:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">records</span><span class="o">.</span><span class="n">may_remove_some</span><span class="p">()</span>
<span class="c1"># only keep records which were not deleted</span>
<span class="n">records</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
</pre></div>
</div>
</dd><dt ><code class="py py-meth xref">ref()</code></dt><dd ><p >Environment method returning the record matching a provided
<a href="../glossary.html#term-external-id" class="internal reference"><span class="std std-term xref">external id</span></a>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="s1">&#39;base.group_public&#39;</span><span class="p">)</span>
<span class="go">res.groups(2)</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.models.Model.ensure_one" class="internal reference" title="openerp.models.Model.ensure_one"><code class="py py-meth xref">ensure_one()</code></a></dt><dd ><p >checks that the recordset is a singleton (only contains a single record),
raises an error otherwise:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">records</span><span class="o">.</span><span class="n">ensure_one</span><span class="p">()</span>
<span class="c1"># is equivalent to but clearer than:</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Expected singleton&quot;</span>
</pre></div>
</div>
</dd></dl></section><section id="creating-models"><h2 >Creating Models</h2><p >Model fields are defined as attributes on the model itself:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">openerp</span> <span class="k">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">fields</span>
<span class="k">class</span> <span class="nc">AModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;a.model.name&#39;</span>

    <span class="n">field1</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>
</pre></div>
</div>
<div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p >this means you can not define a field and a method with the same
name, they will conflict</p></div><p >By default, the field's label (user-visible name) is a capitalized version of
the field name, this can be overridden with the <code >string</code> parameter:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">field2</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">&quot;an other field&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >For the various field types and parameters, see <a href="#reference-orm-fields" class="internal reference"><span class="std std-ref">the fields reference</span></a>.</p><p >Default values are defined as parameters on fields, either a value:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">a_field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;a value&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >or a function called to compute the default value, which should return that
value:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute_default_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<span class="n">a_field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">compute_default_value</span><span class="p">)</span>
</pre></div>
</div>
</section><section id="computed-fields"><h3 >Computed fields</h3><p >Fields can be computed (instead of read straight from the database) using the
<code >compute</code> parameter. <strong >It must assign the computed value to the field</strong>. If
it uses the values of other <em >fields</em>, it should specify those fields using
<a href="#openerp.api.depends" class="internal reference" title="openerp.api.depends"><code class="py xref py-func">depends()</code></a>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">openerp</span> <span class="k">import</span> <span class="n">api</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_total&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;tax&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">record</span><span class="o">.</span><span class="n">tax</span>
</pre></div>
</div>
<ul ><li ><p >dependencies can be dotted paths when using sub-fields:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;line_ids.value&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">line_ids</span><span class="p">)</span>
</pre></div>
</div>
</li><li >computed fields are not stored by default, they are computed and
returned when requested. Setting <code >store=True</code> will store them in the
database and automatically enable searching</li><li ><p >searching on a computed field can also be enabled by setting the <code >search</code>
parameter. The value is a method name returning a
<a href="#reference-orm-domains" class="internal reference"><span class="std std-ref">Domains</span></a>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">upper_name</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_upper&#39;</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s1">&#39;_search_upper&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_search_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;like&#39;</span><span class="p">:</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="s1">&#39;ilike&#39;</span>
    <span class="k">return</span> <span class="p">[(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">)]</span>
</pre></div>
</div>
</li><li ><p >to allow <em >setting</em> values on a computed field, use the <code >inverse</code>
parameter. It is the name of a function reversing the computation and
setting the relevant fields:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">document</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_get_document&#39;</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="s1">&#39;_set_document&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_get_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">get_document_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">document</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">_set_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">document</span><span class="p">:</span> <span class="k">continue</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">get_document_path</span><span class="p">())</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
</li><li ><p >multiple fields can be computed at the same time by the same method, just
use the same method on all fields and set all of them:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">discount_value</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_apply_discount&#39;</span><span class="p">)</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_apply_discount&#39;</span><span class="p">)</span>

<span class="nd">@depends</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;discount&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_apply_discount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="c1"># compute actual discount from discount percentage</span>
        <span class="n">discount</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">record</span><span class="o">.</span><span class="n">discount</span>
        <span class="n">record</span><span class="o">.</span><span class="n">discount_value</span> <span class="o">=</span> <span class="n">discount</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">discount</span>
</pre></div>
</div>
</li></ul></section><section id="related-fields"><h4 >Related fields</h4><p >A special case of computed fields are <em >related</em> (proxy) fields, which provide
the value of a sub-field on the current record. They are defined by setting
the <code >related</code> parameter and like regular computed fields they can be
stored:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nickname</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">related</span><span class="o">=</span><span class="s1">&#39;user_id.partner_id.name&#39;</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section><section id="onchange-updating-ui-on-the-fly"><h3 >onchange: updating UI on the fly</h3><p >When a user changes a field's value in a form (but hasn't saved the form yet),
it can be useful to automatically update other fields based on that value
e.g. updating a final total when the tax is changed or a new invoice line is
added.</p><ul ><li >computed fields are automatically checked and recomputed, they do not need
an <code >onchange</code></li><li ><p >for non-computed fields, the <a href="#openerp.api.onchange" class="internal reference" title="openerp.api.onchange"><code class="py xref py-func">onchange()</code></a> decorator is used
to provide new field values:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">onchange</span><span class="p">(</span><span class="s1">&#39;field1&#39;</span><span class="p">,</span> <span class="s1">&#39;field2&#39;</span><span class="p">)</span> <span class="c1"># if these fields are changed, call method</span>
<span class="k">def</span> <span class="nf">check_change</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field1</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">field2</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field3</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p >the changes performed during the method are then sent to the client program
and become visible to the user</p></li><li >Both computed fields and new-API onchanges are automatically called by the
client without having to add them in views</li><li ><p >It is possible to suppress the trigger from a specific field by adding
<code >on_change=&quot;0&quot;</code> in a view:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">field</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span> <span class="n">on_change</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p >will not trigger any interface update when the field is edited by the user,
even if there are function fields or explicit onchange depending on that
field.</p></li></ul><div role="alert" class="alert-info alert"><p class="alert-title">Note</p><p ><code >onchange</code> methods work on virtual records assignment on these records
is not written to the database, just used to know which value to send back
to the client</p></div></section><section id="low-level-sql"><h3 >Low-level SQL</h3><p >The <code class="py xref py-attr">cr</code> attribute on environments is the
cursor for the current database transaction and allows executing SQL directly,
either for queries which are difficult to express using the ORM (e.g. complex
joins) or for performance reasons:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;some_sql&quot;</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="n">param3</span><span class="p">)</span>
</pre></div>
</div>
<p >Because models use the same cursor and the <code class="py xref py-class">Environment</code>
holds various caches, these caches must be invalidated when <em >altering</em> the
database in raw SQL, or further uses of models may become incoherent. It is
necessary to clear caches when using <code >CREATE</code>, <code >UPDATE</code> or <code >DELETE</code> in
SQL, but not <code >SELECT</code> (which simply reads the database).</p><p >Clearing caches can be performed using the
<code class="py py-meth xref">invalidate_all()</code> method of the
<code class="py xref py-class">Environment</code> object.</p></section><section id="compatibility-between-new-api-and-old-api"><i id="reference-orm-oldapi"></i><h2 >Compatibility between new API and old API</h2><p >Odoo is currently transitioning from an older (less regular) API, it can be
necessary to manually bridge from one to the other manually:</p><ul ><li >RPC layers (both XML-RPC and JSON-RPC) are expressed in terms of the old
API, methods expressed purely in the new API are not available over RPC</li><li >overridable methods may be called from older pieces of code still written
in the old API style</li></ul><p >The big differences between the old and new APIs are:</p><ul ><li >values of the <code class="py xref py-class">Environment</code> (cursor, user id and
context) are passed explicitly to methods instead</li><li >record data (<a href="#openerp.models.Model.ids" class="internal reference" title="openerp.models.Model.ids"><code class="py xref py-attr">ids</code></a>) are passed explicitly to
methods, and possibly not passed at all</li><li >methods tend to work on lists of ids instead of recordsets</li></ul><p >By default, methods are assumed to use the new API style and are not callable
from the old API style.</p><div role="alert" class="alert-info aphorism alert"><p class="alert-title">Tip</p><p >calls from the new API to the old API are bridged</p><p >when using the new API style, calls to methods defined using the old API
are automatically converted on-the-fly, there should be no need to do
anything special:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># method in the old API style</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">old_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="gp">... </span>   <span class="nb">print</span> <span class="n">ids</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># method in the new API style</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">new_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># system automatically infers how to call the old-style</span>
<span class="gp">... </span>    <span class="c1"># method from the new-style method</span>
<span class="gp">... </span>    <span class="bp">self</span><span class="o">.</span><span class="n">old_method</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="p">[</span><span class="n">model</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">new_method</span><span class="p">()</span>
<span class="go">[1, 2, 3, 4]</span>
</pre></div>
</div>
</div><p >Two decorators can expose a new-style method to the old API:</p><dl ><dt ><a href="#openerp.api.model" class="internal reference" title="openerp.api.model"><code class="py xref py-func">model()</code></a></dt><dd ><p >the method is exposed as not using ids, its recordset will generally be
empty. Its &quot;old API&quot; signature is <code >cr, uid, *arguments, context</code>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">model</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a_value</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="c1"># can be called as</span>
<span class="n">old_style_model</span><span class="o">.</span><span class="n">some_method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">a_value</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</dd><dt ><a href="#openerp.api.multi" class="internal reference" title="openerp.api.multi"><code class="py xref py-func">multi()</code></a></dt><dd ><p >the method is exposed as taking a list of ids (possibly empty), its
&quot;old API&quot; signature is <code >cr, uid, ids, *arguments, context</code>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">multi</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a_value</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="c1"># can be called as</span>
<span class="n">old_style_model</span><span class="o">.</span><span class="n">some_method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="p">[</span><span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">],</span> <span class="n">a_value</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl><p >Because new-style APIs tend to return recordsets and old-style APIs tend to
return lists of ids, there is also a decorator managing this:</p><dl ><dt ><a href="#openerp.api.returns" class="internal reference" title="openerp.api.returns"><code class="py xref py-func">returns()</code></a></dt><dd ><p >the function is assumed to return a recordset, the first parameter should
be the name of the recordset's model or <code >self</code> (for the current model).</p><p >No effect if the method is called in new API style, but transforms the
recordset into a list of ids when called from the old API style:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@api</span><span class="o">.</span><span class="n">multi</span>
<span class="gp">... </span><span class="nd">@api</span><span class="o">.</span><span class="n">returns</span><span class="p">(</span><span class="s1">&#39;self&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="bp">self</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_style_model</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;a.model&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_style_model</span><span class="o">.</span><span class="n">some_method</span><span class="p">()</span>
<span class="go">a.model(1, 2, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_style_model</span> <span class="o">=</span> <span class="n">pool</span><span class="p">[</span><span class="s1">&#39;a.model&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_style_model</span><span class="o">.</span><span class="n">some_method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
</dd></dl></section><section id="model-reference"><i id="reference-orm-model"></i><h2 >Model Reference</h2><section class="code-class"><h6 id="openerp.models.Model"><code><em >class </em>openerp.models.Model(<em>pool</em>, <em>cr</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L6199" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Main super-class for regular database-persisted OpenERP models.</p><p >OpenERP models are created by inheriting from this class:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">user</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >The system will later instantiate the class once per database (on
which the class' module is installed).</p><h3 >Structural attributes</h3><section class="code-attribute"><h6 id="openerp.models.Model._name"><code>_name</code></h6><p >business object name, in dot-notation (in module namespace)</p></section><section class="code-attribute"><h6 id="openerp.models.Model._rec_name"><code>_rec_name</code></h6><p >Alternative field to use as name, used by osv’s name_get()
(default: <code >'name'</code>)</p></section><section class="code-attribute"><h6 id="openerp.models.Model._inherit"><code>_inherit</code></h6><ul ><li >If <a href="#openerp.models.Model._name" class="internal alert-link reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a> is set, names of parent models to inherit from.
Can be a <code >str</code> if inheriting from a single parent</li><li >If <a href="#openerp.models.Model._name" class="internal alert-link reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a> is unset, name of a single model to extend
in-place</li></ul><p >See <a href="#reference-orm-inheritance" class="internal alert-link reference"><span class="std std-ref">Inheritance and extension</span></a>.</p></section><section class="code-attribute"><h6 id="openerp.models.Model._order"><code>_order</code></h6><p >Ordering field when searching without an ordering specified (default:
<code >'id'</code>)</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body">str</div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model._auto"><code>_auto</code></h6><p >Whether a database table should be created (default: <code >True</code>)</p><p >If set to <code >False</code>, override <code class="py py-meth xref">init()</code> to create the database
table</p></section><section class="code-attribute"><h6 id="openerp.models.Model._table"><code>_table</code></h6><p >Name of the table backing the model created when
<a href="#openerp.models.Model._auto" class="internal alert-link reference" title="openerp.models.Model._auto"><code class="py xref py-attr">_auto</code></a>, automatically generated by
default.</p></section><section class="code-attribute"><h6 id="openerp.models.Model._inherits"><code>_inherits</code></h6><p >dictionary mapping the _name of the parent business objects to the
names of the corresponding foreign key fields to use:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_inherits</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;a.model&#39;</span><span class="p">:</span> <span class="s1">&#39;a_field_id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;b.model&#39;</span><span class="p">:</span> <span class="s1">&#39;b_field_id&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p >implements composition-based inheritance: the new model exposes all
the fields of the <a href="#openerp.models.Model._inherits" class="internal alert-link reference" title="openerp.models.Model._inherits"><code class="py xref py-attr">_inherits</code></a>-ed model but
stores none of them: the values themselves remain stored on the linked
record.</p><div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p >if the same field is defined on multiple
<a href="#openerp.models.Model._inherits" class="internal alert-link reference" title="openerp.models.Model._inherits"><code class="py xref py-attr">_inherits</code></a>-ed</p></div></section><section class="code-attribute"><h6 id="openerp.models.Model._constraints"><code>_constraints</code></h6><p >list of <code >(constraint_function, message, fields)</code> defining Python
constraints. The fields list is indicative</p><div class="deprecated"><p ><span class="versionmodified">Deprecated since version 8.0: </span>use <a href="#openerp.api.constrains" class="internal alert-link reference" title="openerp.api.constrains"><code class="py xref py-func">constrains()</code></a></p></div></section><section class="code-attribute"><h6 id="openerp.models.Model._sql_constraints"><code>_sql_constraints</code></h6><p >list of <code >(name, sql_definition, message)</code> triples defining SQL
constraints to execute when generating the backing table</p></section><section class="code-attribute"><h6 id="openerp.models.Model._parent_store"><code>_parent_store</code></h6><p >Alongside <a href="#openerp.models.Model.parent_left" class="internal alert-link reference" title="openerp.models.Model.parent_left"><code class="py xref py-attr">parent_left</code></a> and <a href="#openerp.models.Model.parent_right" class="internal alert-link reference" title="openerp.models.Model.parent_right"><code class="py xref py-attr">parent_right</code></a>, sets up a
<a href="http://en.wikipedia.org/wiki/Nested_set_model" class="external reference alert-link">nested set</a>  to
enable fast hierarchical queries on the records of the current model
(default: <code >False</code>)</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body">bool</div></div></div></section><h3 >CRUD</h3><section class="code-method"><h6 id="openerp.models.Model.create"><code>create(<em>vals</em>) → record<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L4130" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Creates a new record for the model.</p><p >The new record is initialized using the values from <code >vals</code> and
if necessary those from <a href="#openerp.models.Model.default_get" class="internal alert-link reference" title="openerp.models.Model.default_get"><code class="py py-meth xref">default_get()</code></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >vals</strong> (<a href="https://docs.python.org/2/library/stdtypes.html#dict" class="external reference alert-link" title="(in Python v2.7)"><code >dict</code></a>) -- <p >values for the model's fields, as a dictionary:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;field_name&#39;</span><span class="p">:</span> <span class="n">field_value</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p >see <a href="#openerp.models.Model.write" class="internal alert-link reference" title="openerp.models.Model.write"><code class="py py-meth xref">write()</code></a> for details</p></div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">new record created</div></div><div class="code-field"><div class="code-field-name">Raises</div><div class="code-field-body"><ul ><li ><strong >AccessError</strong> -- <ul ><li >if user has no create rights on the requested object</li><li >if user tries to bypass access rules for create on the requested object</li></ul></li><li ><strong >ValidateError</strong> -- if user tries to enter invalid value for a field that is not in selection</li><li ><strong >UserError</strong> -- if a loop would be created in a hierarchy of objects a result of the operation (such as setting an object as its own parent)</li></ul></div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.browse"><code>browse([<em>ids</em>]) → records<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5399" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Returns a recordset for the ids provided as parameter in the current
environment.</p><p >Can take no ids, a single id or a sequence of ids.</p></section><section class="code-method"><h6 id="openerp.models.Model.unlink"><code>unlink()<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L3647" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Deletes the records of the current set</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Raises</div><div class="code-field-body"><ul ><li ><strong >AccessError</strong> -- <ul ><li >if user has no unlink rights on the requested object</li><li >if user tries to bypass access rules for unlink on the requested object</li></ul></li><li ><strong >UserError</strong> -- if the record is default property for other records</li></ul></div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.write"><code>write(<em>vals</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L3749" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Updates all records in the current set with the provided values.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >vals</strong> (<a href="https://docs.python.org/2/library/stdtypes.html#dict" class="external reference alert-link" title="(in Python v2.7)"><code >dict</code></a>) -- <p >fields to update and the value to set on them e.g:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="s2">&quot;Qux&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p >will set the field <code >foo</code> to <code >1</code> and the field <code >bar</code> to
<code >&quot;Qux&quot;</code> if those are valid (otherwise it will trigger an error).</p></div></div><div class="code-field"><div class="code-field-name">Raises</div><div class="code-field-body"><ul ><li ><strong >AccessError</strong> -- <ul ><li >if user has no write rights on the requested object</li><li >if user tries to bypass access rules for write on the requested object</li></ul></li><li ><strong >ValidateError</strong> -- if user tries to enter invalid value for a field that is not in selection</li><li ><strong >UserError</strong> -- if a loop would be created in a hierarchy of objects a result of the operation (such as setting an object as its own parent)</li></ul></div></div></div><ul ><li >For numeric fields (<a href="#openerp.fields.Integer" class="internal alert-link reference" title="openerp.fields.Integer"><code class="py xref py-class">Integer</code></a>,
<a href="#openerp.fields.Float" class="internal alert-link reference" title="openerp.fields.Float"><code class="py xref py-class">Float</code></a>) the value should be of the
corresponding type</li><li >For <a href="#openerp.fields.Boolean" class="internal alert-link reference" title="openerp.fields.Boolean"><code class="py xref py-class">Boolean</code></a>, the value should be a
<a href="https://docs.python.org/2/library/functions.html#bool" class="external reference alert-link" title="(in Python v2.7)"><code >bool</code></a></li><li >For <a href="#openerp.fields.Selection" class="internal alert-link reference" title="openerp.fields.Selection"><code class="py xref py-class">Selection</code></a>, the value should match the
selection values (generally <a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)"><code >str</code></a>, sometimes
<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><code >int</code></a>)</li><li >For <a href="#openerp.fields.Many2one" class="internal alert-link reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a>, the value should be the
database identifier of the record to set</li><li ><p >Other non-relational fields use a string for value</p><div role="alert" class="alert-danger alert"><p class="alert-title">Danger</p><p >for historical and compatibility reasons,
<a href="#openerp.fields.Date" class="internal alert-link reference" title="openerp.fields.Date"><code class="py xref py-class">Date</code></a> and
<a href="#openerp.fields.Datetime" class="internal alert-link reference" title="openerp.fields.Datetime"><code class="py xref py-class">Datetime</code></a> fields use strings as values
(written and read) rather than <a href="https://docs.python.org/2/library/datetime.html#datetime.date" class="external reference alert-link" title="(in Python v2.7)"><code class="py xref py-class">date</code></a> or
<a href="https://docs.python.org/2/library/datetime.html#datetime.datetime" class="external reference alert-link" title="(in Python v2.7)"><code class="py xref py-class">datetime</code></a>. These date strings are
UTC-only and formatted according to
<code class="py-const py xref">openerp.tools.misc.DEFAULT_SERVER_DATE_FORMAT</code> and
<code class="py-const py xref">openerp.tools.misc.DEFAULT_SERVER_DATETIME_FORMAT</code></p></div></li><li ><p id="openerp-models-relationals-format"><a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a> and
<a href="#openerp.fields.Many2many" class="internal alert-link reference" title="openerp.fields.Many2many"><code class="py xref py-class">Many2many</code></a> use a special &quot;commands&quot; format to
manipulate the set of records stored in/associated with the field.</p><p >This format is a list of triplets executed sequentially, where each
triplet is a command to execute on the set of records. Not all
commands apply in all situations. Possible commands are:</p><dl ><dt ><code >(0, _, values)</code></dt><dd >adds a new record created from the provided <code >value</code> dict.</dd><dt ><code >(1, id, values)</code></dt><dd >updates an existing record of id <code >id</code> with the values in
<code >values</code>. Can not be used in <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a>.</dd><dt ><code >(2, id, _)</code></dt><dd >removes the record of id <code >id</code> from the set, then deletes it
(from the database). Can not be used in <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a>.</dd><dt ><code >(3, id, _)</code></dt><dd >removes the record of id <code >id</code> from the set, but does not
delete it. Can not be used on
<a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>. Can not be used in
<a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a>.</dd><dt ><code >(4, id, _)</code></dt><dd >adds an existing record of id <code >id</code> to the set. Can not be
used on <a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>.</dd><dt ><code >(5, _, _)</code></dt><dd >removes all records from the set, equivalent to using the
command <code >3</code> on every record explicitly. Can not be used on
<a href="#openerp.fields.One2many" class="internal alert-link reference" title="openerp.fields.One2many"><code class="py xref py-class">One2many</code></a>. Can not be used in
<a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a>.</dd><dt ><code >(6, _, ids)</code></dt><dd >replaces all existing records in the set by the <code >ids</code> list,
equivalent to using the command <code >5</code> followed by a command
<code >4</code> for each <code >id</code> in <code >ids</code>.</dd></dl><div role="alert" class="alert-info alert"><p class="alert-title">Note</p><p >Values marked as <code >_</code> in the list above are ignored and
can be anything, generally <code >0</code> or <code >False</code>.</p></div></li></ul></section><section class="code-method"><h6 id="openerp.models.Model.read"><code>read([<em>fields</em>])<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L3213" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Reads the requested fields for the records in <code >self</code>, low-level/RPC
method. In Python code, prefer <a href="#openerp.models.Model.browse" class="internal alert-link reference" title="openerp.models.Model.browse"><code class="py py-meth xref">browse()</code></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >fields</strong> -- list of field names to return (default is all fields)</div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">a list of dictionaries mapping field names to their values,
with one dictionary per record</div></div><div class="code-field"><div class="code-field-name">Raises</div><div class="code-field-body"><strong >AccessError</strong> -- if user has no read rights on some of the given
records</div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.read_group"><code>read_group(<em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L2028" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Get the list of records in list view grouped by the given <code >groupby</code> fields</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >cr</strong> -- database cursor</li><li ><strong >uid</strong> -- current user id</li><li ><strong >domain</strong> -- list specifying search criteria [['field_name', 'operator', 'value'], ...]</li><li ><strong >fields</strong> (<code >list</code>) -- list of fields present in the list view specified on the object</li><li ><strong >groupby</strong> (<code >list</code>) -- list of groupby descriptions by which the records will be grouped.  
A groupby description is either a field (then it will be grouped by that field)
or a string 'field:groupby_function'.  Right now, the only functions supported
are 'day', 'week', 'month', 'quarter' or 'year', and they only make sense for 
date/datetime fields.</li><li ><strong >offset</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><code >int</code></a>) -- optional number of records to skip</li><li ><strong >limit</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><code >int</code></a>) -- optional max number of records to return</li><li ><strong >context</strong> (<a href="https://docs.python.org/2/library/stdtypes.html#dict" class="external reference alert-link" title="(in Python v2.7)"><code >dict</code></a>) -- context arguments, like lang, time zone.</li><li ><strong >orderby</strong> (<code >list</code>) -- optional <code >order by</code> specification, for
overriding the natural sort ordering of the
groups, see also <code class="py py-meth xref">search()</code>
(supported only for many2one fields currently)</li><li ><strong >lazy</strong> (<a href="https://docs.python.org/2/library/functions.html#bool" class="external reference alert-link" title="(in Python v2.7)"><code >bool</code></a>) -- if true, the results are only grouped by the first groupby and the 
remaining groupbys are put in the __context key.  If false, all the groupbys are
done in one call.</li></ul></div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body"><p >list of dictionaries(one dictionary for each record) containing:</p><ul ><li >the values of fields grouped by the fields in <code >groupby</code> argument</li><li >__domain: list of tuples specifying the search criteria</li><li >__context: dictionary with argument like <code >groupby</code></li></ul></div></div><div class="code-field"><div class="code-field-name">Return type</div><div class="code-field-body">[{'field_name_1': value, ...]</div></div><div class="code-field"><div class="code-field-name">Raises</div><div class="code-field-body"><strong >AccessError</strong> -- <ul ><li >if user has no read rights on the requested object</li><li >if user tries to bypass access rules for read on the requested object</li></ul></div></div></div></section><h3 >Searching</h3><section class="code-method"><h6 id="openerp.models.Model.search"><code>search(<em>args[, offset=0][, limit=None][, order=None][, count=False]</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L1649" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Searches for records based on the <code >args</code>
<a href="#reference-orm-domains" class="internal alert-link reference"><span class="std std-ref">search domain</span></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >args</strong> -- <a href="#reference-orm-domains" class="internal alert-link reference"><span class="std std-ref">A search domain</span></a>. Use an empty
list to match all records.</li><li ><strong >offset</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><code >int</code></a>) -- number of results to ignore (default: none)</li><li ><strong >limit</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><code >int</code></a>) -- maximum number of records to return (default: all)</li><li ><strong >order</strong> (<a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)"><code >str</code></a>) -- sort string</li><li ><strong >count</strong> (<a href="https://docs.python.org/2/library/functions.html#bool" class="external reference alert-link" title="(in Python v2.7)"><code >bool</code></a>) -- if True, only counts and returns the number of matching records (default: False)</li></ul></div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">at most <code >limit</code> records matching the search criteria</div></div><div class="code-field"><div class="code-field-name">Raises</div><div class="code-field-body"><strong >AccessError</strong> -- <ul ><li >if user tries to bypass access rules for read on the requested object.</li></ul></div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.search_count"><code>search_count(<em>args</em>) → int<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L1638" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Returns the number of records in the current model matching <a href="#reference-orm-domains" class="internal alert-link reference"><span class="std std-ref">the
provided domain</span></a>.</p></section><section class="code-method"><h6 id="openerp.models.Model.name_search"><code>name_search(<em>name=''</em>, <em>args=None</em>, <em>operator='ilike'</em>, <em>limit=100</em>) → records<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L1724" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Search for records that have a display name matching the given
<code >name</code> pattern when compared with the given <code >operator</code>, while also
matching the optional search domain (<code >args</code>).</p><p >This is used for example to provide suggestions based on a partial
value for a relational field. Sometimes be seen as the inverse
function of <a href="#openerp.models.Model.name_get" class="internal alert-link reference" title="openerp.models.Model.name_get"><code class="py py-meth xref">name_get()</code></a>, but it is not guaranteed to be.</p><p >This method is equivalent to calling <a href="#openerp.models.Model.search" class="internal alert-link reference" title="openerp.models.Model.search"><code class="py py-meth xref">search()</code></a> with a search
domain based on <code >display_name</code> and then <a href="#openerp.models.Model.name_get" class="internal alert-link reference" title="openerp.models.Model.name_get"><code class="py py-meth xref">name_get()</code></a> on the
result of the search.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >name</strong> (<a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)"><code >str</code></a>) -- the name pattern to match</li><li ><strong >args</strong> (<code >list</code>) -- optional search domain (see <a href="#openerp.models.Model.search" class="internal alert-link reference" title="openerp.models.Model.search"><code class="py py-meth xref">search()</code></a> for
syntax), specifying further restrictions</li><li ><strong >operator</strong> (<a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)"><code >str</code></a>) -- domain operator for matching <code >name</code>, such as
<code >'like'</code> or <code >'='</code>.</li><li ><strong >limit</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><code >int</code></a>) -- optional max number of records to return</li></ul></div></div><div class="code-field"><div class="code-field-name">Return type</div><div class="code-field-body">list</div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">list of pairs <code >(id, text_repr)</code> for all matching records.</div></div></div></section><h3 >Recordset operations</h3><section class="code-attribute"><h6 id="openerp.models.Model.ids"><code>ids</code></h6><p >List of actual record ids in this recordset (ignores placeholder
ids for records to create)</p></section><section class="code-method"><h6 id="openerp.models.Model.ensure_one"><code>ensure_one()<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5432" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Verifies that the current recorset holds a single record. Raises
an exception otherwise.</p></section><section class="code-method"><h6 id="openerp.models.Model.exists"><code>exists() → records<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5008" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Returns the subset of records in <code >self</code> that exist, and marks deleted
records as such in cache. It can be used as a test on records:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >By convention, new records are returned as existing.</p></section><section class="code-method"><h6 id="openerp.models.Model.filtered"><code>filtered(<em>func</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5573" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Select the records in <code >self</code> such that <code >func(rec)</code> is true, and
return them as a recordset.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >func</strong> -- a function or a dot-separated sequence of field names</div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.sorted"><code>sorted(<em>key=None</em>, <em>reverse=False</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5584" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return the recordset <code >self</code> ordered by <code >key</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >key</strong> -- either a function of one argument that returns a
comparison key for each record, or <code >None</code>, in which case
records are ordered according the default model's order</li><li ><strong >reverse</strong> -- if <code >True</code>, return the result in reverse order</li></ul></div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.mapped"><code>mapped(<em>func</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5547" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Apply <code >func</code> on all records in <code >self</code>, and return the result as a
list or a recordset (if <code >func</code> return recordsets). In the latter
case, the order of the returned recordset is arbitrary.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >func</strong> -- a function or a dot-separated sequence of field names</div></div></div></section><h3 >Environment swapping</h3><section class="code-method"><h6 id="openerp.models.Model.sudo"><code>sudo([<em>user=SUPERUSER</em>])<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5453" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Returns a new version of this recordset attached to the provided
user.</p><p >By default this returns a <code >SUPERUSER</code> recordset, where access
control and record rules are bypassed.</p><div role="alert" class="alert-info alert"><p class="alert-title">Note</p><p >Using <code >sudo</code> could cause data access to cross the
boundaries of record rules, possibly mixing records that
are meant to be isolated (e.g. records from different
companies in multi-company environments).</p><p >It may lead to un-intuitive results in methods which select one
record among many - for example getting the default company, or
selecting a Bill of Materials.</p></div><div role="alert" class="alert-info alert"><p class="alert-title">Note</p><p >Because the record rules and access control will have to be
re-evaluated, the new recordset will not benefit from the current
environment's data cache, so later data access may incur extra
delays while re-fetching from the database.</p></div></section><section class="code-method"><h6 id="openerp.models.Model.with_context"><code>with_context(<em>[context][, **overrides]</em>) → records<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5483" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Returns a new version of this recordset attached to an extended
context.</p><p >The extended context is either the provided <code >context</code> in which
<code >overrides</code> are merged or the <em >current</em> context in which
<code >overrides</code> are merged e.g.:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># current context is {&#39;key1&#39;: True}</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">({},</span> <span class="n">key2</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># -&gt; r2._context is {&#39;key2&#39;: True}</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">key2</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># -&gt; r2._context is {&#39;key1&#39;: True, &#39;key2&#39;: True}</span>
</pre></div>
</div>
</section><section class="code-method"><h6 id="openerp.models.Model.with_env"><code>with_env(<em>env</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L5440" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Returns a new version of this recordset attached to the provided
environment</p><div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p >The new environment will not benefit from the current
environment's data cache, so later data access may incur extra
delays while re-fetching from the database.</p></div><div class="code-fields"></div></section><h3 >Fields and views querying</h3><section class="code-method"><h6 id="openerp.models.Model.fields_get"><code>fields_get(<em>[fields][, attributes]</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L3131" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return the definition of each field.</p><p >The returned value is a dictionary (indiced by field name) of
dictionaries. The _inherits'd fields are included. The string, help,
and selection (if present) attributes are translated.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >allfields</strong> -- list of fields to document, all if empty or not provided</li><li ><strong >attributes</strong> -- list of description attributes to return for each field, all if empty or not provided</li></ul></div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.fields_view_get"><code>fields_view_get([<em>view_id | view_type='form'</em>])<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L1497" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Get the detailed composition of the requested view like fields, model, view architecture</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >view_id</strong> -- id of the view or None</li><li ><strong >view_type</strong> -- type of the view to return if view_id is None ('form', 'tree', ...)</li><li ><strong >toolbar</strong> -- true to include contextual actions</li><li ><strong >submenu</strong> -- deprecated</li></ul></div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">dictionary describing the composition of the requested view (including inherited views and extensions)</div></div><div class="code-field"><div class="code-field-name">Raises</div><div class="code-field-body"><ul ><li ><strong >AttributeError</strong> -- <ul ><li >if the inherited view has unknown position to work with other than 'before', 'after', 'inside', 'replace'</li><li >if some tag other than 'position' is found in parent view</li></ul></li><li ><strong >Invalid ArchitectureError</strong> -- if there is view type other than form, tree, calendar, search etc defined on the structure</li></ul></div></div></div></section><h3 >Miscellaneous methods</h3><section class="code-method"><h6 id="openerp.models.Model.default_get"><code>default_get(<em>fields</em>) → default_values<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L1293" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return default values for the fields in <code >fields_list</code>. Default
values are determined by the context, user defaults, and the model
itself.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >fields_list</strong> -- a list of field names</div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">a dictionary mapping each field name to its corresponding
default value, if it has one.</div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.copy"><code>copy(<em>default=None</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L4989" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Duplicate record with given id updating it with default values</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >default</strong> (<a href="https://docs.python.org/2/library/stdtypes.html#dict" class="external reference alert-link" title="(in Python v2.7)"><code >dict</code></a>) -- dictionary of field values to override in the
original values of the copied record, e.g: <code >{'field_name': overridden_value, ...}</code></div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">new record</div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.name_get"><code>name_get() → [(id, name), ...]<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L1680" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Returns a textual representation for the records in <code >self</code>.
By default this is the value of the <code >display_name</code> field.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">list of pairs <code >(id, text_repr)</code> for each records</div></div><div class="code-field"><div class="code-field-name">Return type</div><div class="code-field-body">list(tuple)</div></div></div></section><section class="code-method"><h6 id="openerp.models.Model.name_create"><code>name_create(<em>name</em>) → record<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/models.py#L1702" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Create a new record by calling <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a> with only one value
provided: the display name of the new record.</p><p >The new record will be initialized with any default values
applicable to this model, or provided through the context. The usual
behavior of <a href="#openerp.models.Model.create" class="internal alert-link reference" title="openerp.models.Model.create"><code class="py py-meth xref">create()</code></a> applies.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >name</strong> -- display name of the record to create</div></div><div class="code-field"><div class="code-field-name">Return type</div><div class="code-field-body"><a href="https://docs.python.org/2/library/functions.html#tuple" class="external reference alert-link" title="(in Python v2.7)">tuple</a></div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">the <a href="#openerp.models.Model.name_get" class="internal alert-link reference" title="openerp.models.Model.name_get"><code class="py py-meth xref">name_get()</code></a> pair value of the created record</div></div></div></section><h3 id="reference-orm-model-automatic">Automatic fields</h3><section class="code-attribute"><h6 id="openerp.models.Model.id"><code>id</code></h6><p >Identifier <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">field</code></a></p></section><section class="code-attribute"><h6 id="openerp.models.Model._log_access"><code>_log_access</code></h6><p >Whether log access fields (<code >create_date</code>, <code >write_uid</code>, ...) should
be generated (default: <code >True</code>)</p></section><section class="code-attribute"><h6 id="openerp.models.Model.create_date"><code>create_date</code></h6><p >Date at which the record was created</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><code class="py xref py-class">Datetime</code></div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model.create_uid"><code>create_uid</code></h6><p >Relational field to the user who created the record</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><code >res.users</code></div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model.write_date"><code>write_date</code></h6><p >Date at which the record was last modified</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><code class="py xref py-class">Datetime</code></div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model.write_uid"><code>write_uid</code></h6><p >Relational field to the last user who modified the record</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><code >res.users</code></div></div></div></section><h3 >Reserved field names</h3><p >A few field names are reserved for pre-defined behaviors beyond that of
automated fields. They should be defined on a model when the related
behavior is desired:</p><section class="code-attribute"><h6 id="openerp.models.Model.name"><code>name</code></h6><p >default value for <a href="#openerp.models.Model._rec_name" class="internal alert-link reference" title="openerp.models.Model._rec_name"><code class="py xref py-attr">_rec_name</code></a>, used to
display records in context where a representative &quot;naming&quot; is
necessary.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><a href="#openerp.fields.Char" class="internal alert-link reference" title="openerp.fields.Char"><code class="py xref py-class">Char</code></a></div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model.active"><code>active</code></h6><p >toggles the global visibility of the record, if <code >active</code> is set to
<code >False</code> the record is invisible in most searches and listing</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><a href="#openerp.fields.Boolean" class="internal alert-link reference" title="openerp.fields.Boolean"><code class="py xref py-class">Boolean</code></a></div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model.sequence"><code>sequence</code></h6><p >Alterable ordering criteria, allows drag-and-drop reordering of models
in list views</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><a href="#openerp.fields.Integer" class="internal alert-link reference" title="openerp.fields.Integer"><code class="py xref py-class">Integer</code></a></div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model.state"><code>state</code></h6><p >lifecycle stages of the object, used by the <code >states</code> attribute on
<a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">fields</code></a></p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><a href="#openerp.fields.Selection" class="internal alert-link reference" title="openerp.fields.Selection"><code class="py xref py-class">Selection</code></a></div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model.parent_id"><code>parent_id</code></h6><p >used to order records in a tree structure and enables the <code >child_of</code>
operator in domains</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><a href="#openerp.fields.Many2one" class="internal alert-link reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a></div></div></div></section><section class="code-attribute"><h6 id="openerp.models.Model.parent_left"><code>parent_left</code></h6><p >used with <a href="#openerp.models.Model._parent_store" class="internal alert-link reference" title="openerp.models.Model._parent_store"><code class="py xref py-attr">_parent_store</code></a>, allows faster tree structure access</p></section><section class="code-attribute"><h6 id="openerp.models.Model.parent_right"><code>parent_right</code></h6><p >see <a href="#openerp.models.Model.parent_left" class="internal alert-link reference" title="openerp.models.Model.parent_left"><code class="py xref py-attr">parent_left</code></a></p></section></section></section><section id="module-openerp.api"><i id="method-decorators"></i><i id="reference-orm-decorators"></i><h2 >Method decorators</h2><p >This module provides the elements for managing two different API styles,
namely the &quot;traditional&quot; and &quot;record&quot; styles.</p><p >In the &quot;traditional&quot; style, parameters like the database cursor, user id,
context dictionary and record ids (usually denoted as <code >cr</code>, <code >uid</code>,
<code >context</code>, <code >ids</code>) are passed explicitly to all methods. In the &quot;record&quot;
style, those parameters are hidden into model instances, which gives it a
more object-oriented feel.</p><p >For instance, the statements:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MODEL</span><span class="p">)</span>
<span class="n">ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">DOMAIN</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span>
<span class="n">model</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">VALUES</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p >may also be written as:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span> <span class="c1"># cr, uid, context wrapped in env</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="n">MODEL</span><span class="p">]</span>                  <span class="c1"># retrieve an instance of MODEL</span>
<span class="n">recs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">DOMAIN</span><span class="p">)</span>         <span class="c1"># search returns a recordset</span>
<span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">:</span>                    <span class="c1"># iterate over the records</span>
    <span class="nb">print</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span>
<span class="n">recs</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">VALUES</span><span class="p">)</span>                  <span class="c1"># update all records in recs</span>
</pre></div>
</div>
<p >Methods written in the &quot;traditional&quot; style are automatically decorated,
following some heuristics based on parameter names.</p><section class="code-function"><h6 id="openerp.api.multi"><code>openerp.api.multi(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L360" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Decorate a record-style method where <code >self</code> is a recordset. The method
typically defines an operation on records. Such a method:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">multi</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >may be called in both record and traditional styles, like:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">recs</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</section><section class="code-function"><h6 id="openerp.api.model"><code>openerp.api.model(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L331" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Decorate a record-style method where <code >self</code> is a recordset, but its
contents is not relevant, only the model is. Such a method:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">model</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >may be called in both record and traditional styles, like:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">recs</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p >Notice that no <code >ids</code> are passed to the method in the traditional style.</p></section><section class="code-function"><h6 id="openerp.api.depends"><code>openerp.api.depends(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L181" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return a decorator that specifies the field dependencies of a &quot;compute&quot;
method (for new-style function fields). Each argument must be a string
that consists in a dot-separated sequence of field names:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pname</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_pname&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">one</span>
<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;partner_id.name&#39;</span><span class="p">,</span> <span class="s1">&#39;partner_id.is_company&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_pname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">is_company</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pname</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p >One may also pass a single function as argument. In that case, the
dependencies are given by calling the function with the field's model.</p></section><section class="code-function"><h6 id="openerp.api.constrains"><code>openerp.api.constrains(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L126" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Decorates a constraint checker. Each argument must be a field name
used in the check:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">one</span>
<span class="nd">@api</span><span class="o">.</span><span class="n">constrains</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_check_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Fields name and description must be different&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >Invoked on the records on which one of the named fields has been modified.</p><p >Should raise <code class="py xref py-class">ValidationError</code> if the
validation failed.</p><div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p ><code >@constrains</code> only supports simple field names, dotted names
(fields of relational fields e.g. <code >partner_id.customer</code>) are not
supported and will be ignored</p></div></section><section class="code-function"><h6 id="openerp.api.onchange"><code>openerp.api.onchange(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L150" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return a decorator to decorate an onchange method for given fields.
Each argument must be a field name:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">onchange</span><span class="p">(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_onchange_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Dear </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >In the form views where the field appears, the method will be called
when one of the given fields is modified. The method is invoked on a
pseudo-record that contains the values present in the form. Field
assignments on that record are automatically sent back to the client.</p><p >The method may return a dictionary for changing field domains and pop up
a warning message, like in the old API:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">{</span>
    <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;other_id&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">partner_id</span><span class="p">)]},</span>
    <span class="s1">&#39;warning&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;What is this?&quot;</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p ><code >@onchange</code> only supports simple field names, dotted names
(fields of relational fields e.g. <code >partner_id.tz</code>) are not
supported and will be ignored</p></div></section><section class="code-function"><h6 id="openerp.api.returns"><code>openerp.api.returns(<em>model</em>, <em>downgrade=None</em>, <em>upgrade=None</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L206" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return a decorator for methods that return instances of <code >model</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >model</strong> -- a model name, or <code >'self'</code> for the current model</li><li ><strong >downgrade</strong> -- a function <code >downgrade(self, value, *args, **kwargs)</code>
to convert the record-style <code >value</code> to a traditional-style output</li><li ><strong >upgrade</strong> -- a function <code >upgrade(self, value, *args, **kwargs)</code>
to convert the traditional-style <code >value</code> to a record-style output</li></ul></div></div></div><p >The arguments <code >self</code>, <code >*args</code> and <code >**kwargs</code> are the ones passed
to the method in the record-style.</p><p >The decorator adapts the method output to the api style: <code >id</code>, <code >ids</code> or
<code >False</code> for the traditional style, and recordset for the record style:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@model</span>
<span class="nd">@returns</span><span class="p">(</span><span class="s1">&#39;res.partner&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">find_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="o">...</span>     <span class="c1"># return some record</span>

<span class="c1"># output depends on call style: traditional vs record style</span>
<span class="n">partner_id</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">find_partner</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>

<span class="c1"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">partner_record</span> <span class="o">=</span> <span class="n">recs</span><span class="o">.</span><span class="n">find_partner</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
<p >Note that the decorated method must satisfy that convention.</p><p >Those decorators are automatically <em >inherited</em>: a method that overrides
a decorated existing method will be decorated with the same
<code >@returns(model)</code>.</p></section><section class="code-function"><h6 id="openerp.api.one"><code>openerp.api.one(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L387" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Decorate a record-style method where <code >self</code> is expected to be a
singleton instance. The decorated method automatically loops on records,
and makes a list with the results. In case the method is decorated with
<a href="#openerp.api.returns" class="internal alert-link reference" title="openerp.api.returns"><code class="py xref py-func">returns()</code></a>, it concatenates the resulting instances. Such a
method:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">one</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p >may be called in both record and traditional styles, like:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">names</span> <span class="o">=</span> <span class="n">recs</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

<span class="n">names</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<div class="deprecated"><p ><span class="versionmodified">Deprecated since version 9.0: </span><a href="#openerp.api.one" class="internal alert-link reference" title="openerp.api.one"><code class="py xref py-func">one()</code></a> often makes the code less clear and behaves in ways
developers and readers may not expect.</p><p >It is strongly recommended to use <a href="#openerp.api.multi" class="internal alert-link reference" title="openerp.api.multi"><code class="py xref py-func">multi()</code></a> and either
iterate on the <code >self</code> recordset or ensure that the recordset
is a single record with <a href="#openerp.models.Model.ensure_one" class="internal alert-link reference" title="openerp.models.Model.ensure_one"><code class="py py-meth xref">ensure_one()</code></a>.</p></div></section><section class="code-function"><h6 id="openerp.api.v7"><code>openerp.api.v7(<em>method_v7</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L580" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Decorate a method that supports the old-style api only. A new-style api
may be provided by redefining a method with the same name and decorated
with <a href="#openerp.api.v8" class="internal alert-link reference" title="openerp.api.v8"><code class="py xref py-func">v8()</code></a>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">v7</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">v8</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >Special care must be taken if one method calls the other one, because
the method may be overridden! In that case, one should call the method
from the current class (say <code >MyClass</code>), for instance:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">v7</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="c1"># Beware: records.foo() may call an overriding of foo()</span>
    <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">MyClass</span><span class="o">.</span><span class="n">foo</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
</pre></div>
</div>
<p >Note that the wrapper method uses the docstring of the first method.</p></section><section class="code-function"><h6 id="openerp.api.v8"><code>openerp.api.v8(<em>method_v8</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/api.py#L616" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Decorate a method that supports the new-style api only. An old-style api
may be provided by redefining a method with the same name and decorated
with <a href="#openerp.api.v7" class="internal alert-link reference" title="openerp.api.v7"><code class="py xref py-func">v7()</code></a>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">v8</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">v7</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >Note that the wrapper method uses the docstring of the first method.</p></section></section><section id="fields"><i id="reference-orm-fields"></i><h2 >Fields</h2></section><section id="basic-fields"><i id="reference-orm-fields-basic"></i><h3 >Basic fields</h3><section class="code-class"><h6 id="openerp.fields.Field"><code><em >class </em>openerp.fields.Field(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L138" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >The field descriptor contains the field definition, and manages accesses
and assignments of the corresponding field on records. The following
attributes may be provided when instanciating a field:</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >string</strong> -- the label of the field seen by users (string); if not
set, the ORM takes the field name in the class (capitalized).</li><li ><strong >help</strong> -- the tooltip of the field seen by users (string)</li><li ><strong >readonly</strong> -- whether the field is readonly (boolean, by default <code >False</code>)</li><li ><strong >required</strong> -- whether the value of the field is required (boolean, by
default <code >False</code>)</li><li ><strong >index</strong> -- whether the field is indexed in database (boolean, by
default <code >False</code>)</li><li ><strong >default</strong> -- the default value for the field; this is either a static
value, or a function taking a recordset and returning a value</li><li ><strong >states</strong> -- a dictionary mapping state values to lists of UI attribute-value
pairs; possible attributes are: 'readonly', 'required', 'invisible'.
Note: Any state-based condition requires the <code >state</code> field value to be
available on the client-side UI. This is typically done by including it in
the relevant views, possibly made invisible if not relevant for the
end-user.</li><li ><strong >groups</strong> -- comma-separated list of group xml ids (string); this
restricts the field access to the users of the given groups only</li><li ><strong >copy</strong> (<a href="https://docs.python.org/2/library/functions.html#bool" class="external reference alert-link" title="(in Python v2.7)"><code >bool</code></a>) -- whether the field value should be copied when the record
is duplicated (default: <code >True</code> for normal fields, <code >False</code> for
<code >one2many</code> and computed fields, including property fields and
related fields)</li><li ><strong >oldname</strong> (<a href="https://docs.python.org/2/library/string.html#module-string" class="external reference alert-link" title="(in Python v2.7)"><code >string</code></a>) -- the previous name of this field, so that ORM can rename
it automatically at migration</li></ul></div></div></div><h4 id="field-computed">Computed fields</h4><p >One can define a field whose value is computed instead of simply being
read from the database. The attributes that are specific to computed
fields are given below. To define such a field, simply provide a value
for the attribute <code >compute</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >compute</strong> -- name of a method that computes the field</li><li ><strong >inverse</strong> -- name of a method that inverses the field (optional)</li><li ><strong >search</strong> -- name of a method that implement search on the field (optional)</li><li ><strong >store</strong> -- whether the field is stored in database (boolean, by
default <code >False</code> on computed fields)</li><li ><strong >compute_sudo</strong> -- whether the field should be recomputed as superuser
to bypass access rights (boolean, by default <code >False</code>)</li></ul></div></div></div><p >The methods given for <code >compute</code>, <code >inverse</code> and <code >search</code> are model
methods. Their signature is shown in the following example:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">upper</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_upper&#39;</span><span class="p">,</span>
                    <span class="n">inverse</span><span class="o">=</span><span class="s1">&#39;_inverse_upper&#39;</span><span class="p">,</span>
                    <span class="n">search</span><span class="o">=</span><span class="s1">&#39;_search_upper&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">rec</span><span class="o">.</span><span class="n">upper</span> <span class="o">=</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="kc">False</span>

<span class="k">def</span> <span class="nf">_inverse_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">rec</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">rec</span><span class="o">.</span><span class="n">upper</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">upper</span> <span class="k">else</span> <span class="kc">False</span>

<span class="k">def</span> <span class="nf">_search_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;like&#39;</span><span class="p">:</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="s1">&#39;ilike&#39;</span>
    <span class="k">return</span> <span class="p">[(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">)]</span>
</pre></div>
</div>
<p >The compute method has to assign the field on all records of the invoked
recordset. The decorator <a href="#openerp.api.depends" class="internal alert-link reference" title="openerp.api.depends"><code class="py py-meth xref">openerp.api.depends()</code></a> must be applied on
the compute method to specify the field dependencies; those dependencies
are used to determine when to recompute the field; recomputation is
automatic and guarantees cache/database consistency. Note that the same
method can be used for several fields, you simply have to assign all the
given fields in the method; the method will be invoked once for all
those fields.</p><p >By default, a computed field is not stored to the database, and is
computed on-the-fly. Adding the attribute <code >store=True</code> will store the
field's values in the database. The advantage of a stored field is that
searching on that field is done by the database itself. The disadvantage
is that it requires database updates when the field must be recomputed.</p><p >The inverse method, as its name says, does the inverse of the compute
method: the invoked records have a value for the field, and you must
apply the necessary changes on the field dependencies such that the
computation gives the expected value. Note that a computed field without
an inverse method is readonly by default.</p><p >The search method is invoked when processing domains before doing an
actual search on the model. It must return a domain equivalent to the
condition: <code >field operator value</code>.</p><h4 id="field-related">Related fields</h4><p >The value of a related field is given by following a sequence of
relational fields and reading a field on the reached model. The complete
sequence of fields to traverse is specified by the attribute</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >related</strong> -- sequence of field names</div></div></div><p >Some field attributes are automatically copied from the source field if
they are not redefined: <code >string</code>, <code >help</code>, <code >readonly</code>, <code >required</code> (only
if all fields in the sequence are required), <code >groups</code>, <code >digits</code>, <code >size</code>,
<code >translate</code>, <code >sanitize</code>, <code >selection</code>, <code >comodel_name</code>, <code >domain</code>,
<code >context</code>. All semantic-free attributes are copied from the source
field.</p><p >By default, the values of related fields are not stored to the database.
Add the attribute <code >store=True</code> to make it stored, just like computed
fields. Related fields are automatically recomputed when their
dependencies are modified.</p><h4 id="field-company-dependent">Company-dependent fields</h4><p >Formerly known as 'property' fields, the value of those fields depends
on the company. In other words, users that belong to different companies
may see different values for the field on a given record.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >company_dependent</strong> -- whether the field is company-dependent (boolean)</div></div></div><h4 id="field-incremental-definition">Incremental definition</h4><p >A field is defined as class attribute on a model class. If the model
is extended (see <a href="#openerp.models.Model" class="internal alert-link reference" title="openerp.models.Model"><code class="py xref py-class">Model</code></a>), one can also extend
the field definition by redefining a field with the same name and same
type on the subclass. In that case, the attributes of the field are
taken from the parent class and overridden by the ones given in
subclasses.</p><p >For instance, the second class below only adds a tooltip on the field
<code >state</code>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">First</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">([</span><span class="o">...</span><span class="p">],</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Second</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Blah blah blah&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section><section class="code-class"><h6 id="openerp.fields.Char"><code><em >class </em>openerp.fields.Char(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1232" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <code class="py xref py-class">openerp.fields._String</code></p><p >Basic string field, can be length-limited, usually displayed as a
single-line string in clients.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >size</strong> (<a href="https://docs.python.org/2/library/functions.html#int" class="external reference alert-link" title="(in Python v2.7)"><code >int</code></a>) -- the maximum size of values stored for that field</li><li ><strong >translate</strong> -- enable the translation of the field's values; use
<code >translate=True</code> to translate field values as a whole; <code >translate</code>
may also be a callable such that <code >translate(callback, value)</code>
translates <code >value</code> by using <code >callback(term)</code> to retrieve the
translation of terms.</li></ul></div></div></div></section><section class="code-class"><h6 id="openerp.fields.Boolean"><code><em >class </em>openerp.fields.Boolean(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1045" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p></section><section class="code-class"><h6 id="openerp.fields.Integer"><code><em >class </em>openerp.fields.Integer(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1057" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p></section><section class="code-class"><h6 id="openerp.fields.Float"><code><em >class </em>openerp.fields.Float(<em>string=None</em>, <em>digits=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1090" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p><p >The precision digits are given by the attribute</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >digits</strong> -- a pair (total, decimal), or a function taking a database
cursor and returning a pair (total, decimal)</div></div></div></section><section class="code-class"><h6 id="openerp.fields.Text"><code><em >class </em>openerp.fields.Text(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1263" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <code class="py xref py-class">openerp.fields._String</code></p><p >Very similar to <a href="#openerp.fields.Char" class="internal alert-link reference" title="openerp.fields.Char"><code class="py xref py-class">Char</code></a> but used for longer contents, does not
have a size and usually displayed as a multiline text box.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >translate</strong> -- enable the translation of the field's values; use
<code >translate=True</code> to translate field values as a whole; <code >translate</code>
may also be a callable such that <code >translate(callback, value)</code>
translates <code >value</code> by using <code >callback(term)</code> to retrieve the
translation of terms.</div></div></div></section><section class="code-class"><h6 id="openerp.fields.Selection"><code><em >class </em>openerp.fields.Selection(<em>selection=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1456" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >selection</strong> -- specifies the possible values for this field.
It is given as either a list of pairs (<code >value</code>, <code >string</code>), or a
model method, or a method name.</li><li ><strong >selection_add</strong> -- provides an extension of the selection in the case
of an overridden field. It is a list of pairs (<code >value</code>, <code >string</code>).</li></ul></div></div></div><p >The attribute <code >selection</code> is mandatory except in the case of
<a href="#field-related" class="internal alert-link reference"><span class="std std-ref">related fields</span></a> or <a href="#field-incremental-definition" class="internal alert-link reference"><span class="std std-ref">field extensions</span></a>.</p></section><section class="code-class"><h6 id="openerp.fields.Html"><code><em >class </em>openerp.fields.Html(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1280" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <code class="py xref py-class">openerp.fields._String</code></p></section><section class="code-class"><h6 id="openerp.fields.Date"><code><em >class </em>openerp.fields.Date(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1309" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p><section class="code-staticmethod"><h6 id="openerp.fields.Date.context_today"><code><em >static </em>context_today(<em>record</em>, <em>timestamp=None</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1319" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return the current date as seen in the client's timezone in a format
fit for date fields. This method may be used to compute default
values.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >timestamp</strong> (<a href="https://docs.python.org/2/library/datetime.html#module-datetime" class="external reference alert-link" title="(in Python v2.7)"><code >datetime</code></a>) -- optional datetime value to use instead of
the current date and time (must be a datetime, regular dates
can't be converted between timezones.)</div></div><div class="code-field"><div class="code-field-name">Return type</div><div class="code-field-body"><a href="https://docs.python.org/2/library/functions.html#str" class="external reference alert-link" title="(in Python v2.7)">str</a></div></div></div></section><section class="code-staticmethod"><h6 id="openerp.fields.Date.from_string"><code><em >static </em>from_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1342" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Convert an ORM <code >value</code> into a <code class="py xref py-class">date</code> value.</p></section><section class="code-staticmethod"><h6 id="openerp.fields.Date.to_string"><code><em >static </em>to_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1350" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Convert a <code class="py xref py-class">date</code> value into the format expected by the ORM.</p></section><section class="code-staticmethod"><h6 id="openerp.fields.Date.today"><code><em >static </em>today(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1312" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return the current day in the format expected by the ORM.
This function may be used to compute default values.</p></section></section><section class="code-class"><h6 id="openerp.fields.Datetime"><code><em >class </em>openerp.fields.Datetime(<em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1371" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <a href="#openerp.fields.Field" class="internal alert-link reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a></p><section class="code-staticmethod"><h6 id="openerp.fields.Datetime.context_timestamp"><code><em >static </em>context_timestamp(<em>record</em>, <em>timestamp</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1381" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Returns the given timestamp converted to the client's timezone.
This method is <em >not</em> meant for use as a _defaults initializer,
because datetime fields are automatically converted upon
display on client side. For _defaults you <code class="py py-meth xref">fields.datetime.now()</code>
should be used instead.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >timestamp</strong> (<a href="https://docs.python.org/2/library/datetime.html#module-datetime" class="external reference alert-link" title="(in Python v2.7)"><code >datetime</code></a>) -- naive datetime value (expressed in UTC)
to be converted to the client timezone</div></div><div class="code-field"><div class="code-field-name">Return type</div><div class="code-field-body"><a href="https://docs.python.org/2/library/datetime.html#module-datetime" class="external reference alert-link" title="(in Python v2.7)">datetime</a></div></div><div class="code-field"><div class="code-field-name">Returns</div><div class="code-field-body">timestamp converted to timezone-aware datetime in context
timezone</div></div></div></section><section class="code-staticmethod"><h6 id="openerp.fields.Datetime.from_string"><code><em >static </em>from_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1408" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Convert an ORM <code >value</code> into a <code class="py xref py-class">datetime</code> value.</p></section><section class="code-staticmethod"><h6 id="openerp.fields.Datetime.now"><code><em >static </em>now(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1374" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Return the current day and time in the format expected by the ORM.
This function may be used to compute default values.</p></section><section class="code-staticmethod"><h6 id="openerp.fields.Datetime.to_string"><code><em >static </em>to_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1418" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Convert a <code class="py xref py-class">datetime</code> value into the format expected by the ORM.</p></section></section></section><section id="relational-fields"><i id="reference-orm-fields-relational"></i><h3 >Relational fields</h3><section class="code-class"><h6 id="openerp.fields.Many2one"><code><em >class </em>openerp.fields.Many2one(<em>comodel_name=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1641" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <code class="py xref py-class">openerp.fields._Relational</code></p><p >The value of such a field is a recordset of size 0 (no
record) or 1 (a single record).</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >comodel_name</strong> -- name of the target model (string)</li><li ><strong >domain</strong> -- an optional domain to set on candidate values on the
client side (domain or string)</li><li ><strong >context</strong> -- an optional context to use on the client side when
handling that field (dictionary)</li><li ><strong >ondelete</strong> -- what to do when the referred record is deleted;
possible values are: <code >'set null'</code>, <code >'restrict'</code>, <code >'cascade'</code></li><li ><strong >auto_join</strong> -- whether JOINs are generated upon search through that
field (boolean, by default <code >False</code>)</li><li ><strong >delegate</strong> -- set it to <code >True</code> to make fields of the target model
accessible from the current model (corresponds to <code >_inherits</code>)</li></ul></div></div></div><p >The attribute <code >comodel_name</code> is mandatory except in the case of related
fields or field extensions.</p></section><section class="code-class"><h6 id="openerp.fields.One2many"><code><em >class </em>openerp.fields.One2many(<em>comodel_name=None</em>, <em>inverse_name=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1860" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <code class="py xref py-class">openerp.fields._RelationalMulti</code></p><p >One2many field; the value of such a field is the recordset of all the
records in <code >comodel_name</code> such that the field <code >inverse_name</code> is equal to
the current record.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >comodel_name</strong> -- name of the target model (string)</li><li ><strong >inverse_name</strong> -- name of the inverse <code >Many2one</code> field in
<code >comodel_name</code> (string)</li><li ><strong >domain</strong> -- an optional domain to set on candidate values on the
client side (domain or string)</li><li ><strong >context</strong> -- an optional context to use on the client side when
handling that field (dictionary)</li><li ><strong >auto_join</strong> -- whether JOINs are generated upon search through that
field (boolean, by default <code >False</code>)</li><li ><strong >limit</strong> -- optional limit to use upon read (integer)</li></ul></div></div></div><p >The attributes <code >comodel_name</code> and <code >inverse_name</code> are mandatory except in
the case of related fields or field extensions.</p></section><section class="code-class"><h6 id="openerp.fields.Many2many"><code><em >class </em>openerp.fields.Many2many(<em>comodel_name=None</em>, <em>relation=None</em>, <em>column1=None</em>, <em>column2=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1925" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <code class="py xref py-class">openerp.fields._RelationalMulti</code></p><p >Many2many field; the value of such a field is the recordset.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><strong >comodel_name</strong> -- name of the target model (string)</div></div></div><p >The attribute <code >comodel_name</code> is mandatory except in the case of related
fields or field extensions.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >relation</strong> -- optional name of the table that stores the relation in
the database (string)</li><li ><strong >column1</strong> -- optional name of the column referring to &quot;these&quot; records
in the table <code >relation</code> (string)</li><li ><strong >column2</strong> -- optional name of the column referring to &quot;those&quot; records
in the table <code >relation</code> (string)</li></ul></div></div></div><p >The attributes <code >relation</code>, <code >column1</code> and <code >column2</code> are optional. If not
given, names are automatically generated from model names, provided
<code >model_name</code> and <code >comodel_name</code> are different!</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Parameters</div><div class="code-field-body"><ul ><li ><strong >domain</strong> -- an optional domain to set on candidate values on the
client side (domain or string)</li><li ><strong >context</strong> -- an optional context to use on the client side when
handling that field (dictionary)</li><li ><strong >limit</strong> -- optional limit to use upon read (integer)</li></ul></div></div></div></section><section class="code-class"><h6 id="openerp.fields.Reference"><code><em >class </em>openerp.fields.Reference(<em>selection=None</em>, <em>string=None</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/9.0/9.0/openerp/fields.py#L1557" class="external reference alert-link"><span class="viewcode-link">[source]</span></a></code></h6><p >Bases: <a href="#openerp.fields.Selection" class="internal alert-link reference" title="openerp.fields.Selection"><code class="py xref py-class">openerp.fields.Selection</code></a></p></section></section><section id="inheritance-and-extension"><i id="reference-orm-inheritance"></i><h2 >Inheritance and extension</h2><p >Odoo provides three different mechanisms to extend models in a modular way:</p><ul ><li >creating a new model from an existing one, adding new information to the
copy but leaving the original module as-is</li><li >extending models defined in other modules in-place, replacing the previous
version</li><li >delegating some of the model's fields to records it contains</li></ul><img src="../_images/inheritance_methods1.png" class="img-responsive center-block"></section><section id="classical-inheritance"><h3 >Classical inheritance</h3><p >When using the <a href="#openerp.models.Model._inherit" class="internal reference" title="openerp.models.Model._inherit"><code class="py xref py-attr">_inherit</code></a> and
<a href="#openerp.models.Model._name" class="internal reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a> attributes together, Odoo creates a new
model using the existing one (provided via
<a href="#openerp.models.Model._inherit" class="internal reference" title="openerp.models.Model._inherit"><code class="py xref py-attr">_inherit</code></a>) as a base. The new model gets all the
fields, methods and meta-information (defaults &amp; al) from its base.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Inheritance0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;inheritance.0&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;model 0&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;This is {} record {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Inheritance1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;inheritance.1&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;inheritance.0&#39;</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;model 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >and using them:</p><div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">a</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;inheritance.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">})</span>
        <span class="n">a</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;inheritance.1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;B&#39;</span><span class="p">})</span>
        <span class="n">b</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
</pre></div>
</div>
<p >will yield:</p><div class="highlight-text"><div class="highlight"><pre><span></span>        This is model 0 record A
        This is model 1 record B
</pre></div>
</div>
<p >the second model has inherited from the first model's <code >check</code> method and its
<code >name</code> field, but overridden the <code >call</code> method, as when using standard
<a href="https://docs.python.org/2/tutorial/classes.html#tut-inheritance" class="external reference" title="(in Python v2.7)"><span class="std xref std-ref">Python inheritance</span></a>.</p></section><section id="extension"><h3 >Extension</h3><p >When using <a href="#openerp.models.Model._inherit" class="internal reference" title="openerp.models.Model._inherit"><code class="py xref py-attr">_inherit</code></a> but leaving out
<a href="#openerp.models.Model._name" class="internal reference" title="openerp.models.Model._name"><code class="py xref py-attr">_name</code></a>, the new model replaces the existing one,
essentially extending it in-place. This is useful to add new fields or methods
to existing models (created in other modules), or to customize or reconfigure
them (e.g. to change their default sort order):</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Extension0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;extension.0&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Extension1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;extension.0&#39;</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;Extended&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;extension.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({})</span>
        <span class="n">record</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p >will yield:</p><div class="highlight-text"><div class="highlight"><pre><span></span>        {&#39;name&#39;: &quot;A&quot;, &#39;description&#39;: &quot;Extended&quot;}
</pre></div>
</div>
<div role="alert" class="alert-info alert"><p class="alert-title">Note</p><p >it will also yield the various <a href="#reference-orm-model-automatic" class="internal alert-link reference"><span class="std std-ref">automatic fields</span></a> unless they've been disabled</p></div></section><section id="delegation"><h3 >Delegation</h3><p >The third inheritance mechanism provides more flexibility (it can be altered
at runtime) but less power: using the <a href="#openerp.models.Model._inherits" class="internal reference" title="openerp.models.Model._inherits"><code class="py xref py-attr">_inherits</code></a>
a model <em >delegates</em> the lookup of any field not found on the current model
to &quot;children&quot; models. The delegation is performed via
<a href="#openerp.fields.Reference" class="internal reference" title="openerp.fields.Reference"><code class="py xref py-class">Reference</code></a> fields automatically set up on the parent
model:</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Child0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.child0&#39;</span>

    <span class="n">field_0</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Child1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.child1&#39;</span>

    <span class="n">field_1</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Delegating</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.parent&#39;</span>

    <span class="n">_inherits</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;delegation.child0&#39;</span><span class="p">:</span> <span class="s1">&#39;child0_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;delegation.child1&#39;</span><span class="p">:</span> <span class="s1">&#39;child1_id&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">child0_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s1">&#39;delegation.child0&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s1">&#39;cascade&#39;</span><span class="p">)</span>
    <span class="n">child1_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s1">&#39;delegation.child1&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s1">&#39;cascade&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.parent&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span>
            <span class="s1">&#39;child0_id&#39;</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.child0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;field_0&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s1">&#39;child1_id&#39;</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.child1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;field_1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="n">record</span><span class="o">.</span><span class="n">field_0</span>
        <span class="n">record</span><span class="o">.</span><span class="n">field_1</span>
</pre></div>
</div>
<p >will result in:</p><div class="highlight-text"><div class="highlight"><pre><span></span>        0
        1
</pre></div>
</div>
<p >and it's possible to write directly on the delegated field:</p><div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s1">&#39;field_1&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</pre></div>
</div>
<div role="alert" class="alert-warning alert"><p class="alert-title">Warning</p><p >when using delegation inheritance, methods are <em >not</em> inherited,
only fields</p></div></section><section id="domains"><i id="reference-orm-domains"></i><h2 >Domains</h2><p >A domain is a list of criteria, each criterion being a triple (either a
<code >list</code> or a <code >tuple</code>) of <code >(field_name, operator, value)</code> where:</p><dl ><dt ><code >field_name</code> (<code >str</code>)</dt><dd >a field name of the current model, or a relationship traversal through
a <a href="#openerp.fields.Many2one" class="internal reference" title="openerp.fields.Many2one"><code class="py xref py-class">Many2one</code></a> using dot-notation e.g. <code >'street'</code>
or <code >'partner_id.country'</code></dd><dt ><code >operator</code> (<code >str</code>)</dt><dd ><p >an operator used to compare the <code >field_name</code> with the <code >value</code>. Valid
operators are:</p><dl ><dt ><code >=</code></dt><dd >equals to</dd><dt ><code >!=</code></dt><dd >not equals to</dd><dt ><code >&gt;</code></dt><dd >greater than</dd><dt ><code >&gt;=</code></dt><dd >greater than or equal to</dd><dt ><code >&lt;</code></dt><dd >less than</dd><dt ><code >&lt;=</code></dt><dd >less than or equal to</dd><dt ><code >=?</code></dt><dd >unset or equals to (returns true if <code >value</code> is either <code >None</code> or
<code >False</code>, otherwise behaves like <code >=</code>)</dd><dt ><code >=like</code></dt><dd >matches <code >field_name</code> against the <code >value</code> pattern. An underscore
<code >_</code> in the pattern stands for (matches) any single character; a
percent sign <code >%</code> matches any string of zero or more characters.</dd><dt ><code >like</code></dt><dd >matches <code >field_name</code> against the <code >%value%</code> pattern. Similar to
<code >=like</code> but wraps <code >value</code> with '%' before matching</dd><dt ><code >not like</code></dt><dd >doesn't match against the <code >%value%</code> pattern</dd><dt ><code >ilike</code></dt><dd >case insensitive <code >like</code></dd><dt ><code >not ilike</code></dt><dd >case insensitive <code >not like</code></dd><dt ><code >=ilike</code></dt><dd >case insensitive <code >=like</code></dd><dt ><code >in</code></dt><dd >is equal to any of the items from <code >value</code>, <code >value</code> should be a
list of items</dd><dt ><code >not in</code></dt><dd >is unequal to all of the items from <code >value</code></dd><dt ><code >child_of</code></dt><dd ><p >is a child (descendant) of a <code >value</code> record.</p><p >Takes the semantics of the model into account (i.e following the
relationship field named by
<code class="py xref py-attr">_parent_name</code>).</p></dd></dl></dd><dt ><code >value</code></dt><dd >variable type, must be comparable (through <code >operator</code>) to the named
field</dd></dl><p >Domain criteria can be combined using logical operators in <em >prefix</em> form:</p><dl ><dt ><code >'&amp;'</code></dt><dd >logical <em >AND</em>, default operation to combine criteria following one
another. Arity 2 (uses the next 2 criteria or combinations).</dd><dt ><code >'|'</code></dt><dd >logical <em >OR</em>, arity 2.</dd><dt ><code >'!'</code></dt><dd ><p >logical <em >NOT</em>, arity 1.</p><div role="alert" class="alert-info aphorism alert"><p class="alert-title">Tip</p><p >Mostly to negate combinations of criteria</p><p >Individual criterion generally have a negative form (e.g. <code >=</code> -&gt;
<code >!=</code>, <code >&lt;</code> -&gt; <code >&gt;=</code>) which is simpler than negating the positive.</p></div></dd></dl><div role="alert" class="admonition-example alert"><p class="alert-title">Example</p><p >To search for partners named <em >ABC</em>, from belgium or germany, whose language
is not english:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;ABC&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;language.code&#39;</span><span class="p">,</span><span class="s1">&#39;!=&#39;</span><span class="p">,</span><span class="s1">&#39;en_US&#39;</span><span class="p">),</span>
 <span class="s1">&#39;|&#39;</span><span class="p">,(</span><span class="s1">&#39;country_id.code&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;be&#39;</span><span class="p">),</span>
     <span class="p">(</span><span class="s1">&#39;country_id.code&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;de&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p >This domain is interpreted as:</p><div class="highlight-text"><div class="highlight"><pre><span></span>    (name is &#39;ABC&#39;)
AND (language is NOT english)
AND (country is Belgium OR Germany)
</pre></div>
</div>
</div></section><section id="porting-from-the-old-api-to-the-new-api"><h2 >Porting from the old API to the new API</h2><ul ><li >bare lists of ids are to be avoided in the new API, use recordsets instead</li><li >methods still written in the old API should be automatically bridged by the
ORM, no need to switch to the old API, just call them as if they were a new
API method. See <a href="#reference-orm-oldapi-bridging" class="internal reference"><span class="std std-ref">Automatic bridging of old API methods</span></a> for more details.</li><li ><a href="#openerp.models.Model.search" class="internal reference" title="openerp.models.Model.search"><code class="py py-meth xref">search()</code></a> returns a recordset, no point in e.g.
browsing its result</li><li ><code >fields.related</code> and <code >fields.function</code> are replaced by using a normal
field type with either a <code >related=</code> or a <code >compute=</code> parameter</li><li ><a href="#openerp.api.depends" class="internal reference" title="openerp.api.depends"><code class="py xref py-func">depends()</code></a> on <code >compute=</code> methods <strong >must be complete</strong>,
it must list <strong >all</strong> the fields and sub-fields which the compute method
uses. It is better to have too many dependencies (will recompute the field
in cases where that is not needed) than not enough (will forget to recompute
the field and then values will be incorrect)</li><li ><strong >remove</strong> all <code >onchange</code> methods on computed fields. Computed fields are
automatically re-computed when one of their dependencies is changed, and
that is used to auto-generate <code >onchange</code> by the client</li><li >the decorators <a href="#openerp.api.model" class="internal reference" title="openerp.api.model"><code class="py xref py-func">model()</code></a> and <a href="#openerp.api.multi" class="internal reference" title="openerp.api.multi"><code class="py xref py-func">multi()</code></a> are
for bridging <em >when calling from the old API context</em>, for internal or pure
new-api (e.g. compute) they are useless</li><li >remove <code class="py xref py-attr">_default</code>, replace by <code >default=</code>
parameter on corresponding fields</li><li ><p >if a field's <code >string=</code> is the titlecased version of the field name:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >it is useless and should be removed</p></li><li >the <code >multi=</code> parameter does not do anything on new API fields use the same
<code >compute=</code> methods on all relevant fields for the same result</li><li >provide <code >compute=</code>, <code >inverse=</code> and <code >search=</code> methods by name (as a
string), this makes them overridable (removes the need for an intermediate
&quot;trampoline&quot; function)</li><li >double check that all fields and methods have different names, there is no
warning in case of collision (because Python handles it before Odoo sees
anything)</li><li >the normal new-api import is <code >from openerp import fields, models</code>. If
compatibility decorators are necessary, use <code >from openerp import api,
fields, models</code></li><li >avoid the <a href="#openerp.api.one" class="internal reference" title="openerp.api.one"><code class="py xref py-func">one()</code></a> decorator, it probably does not do what
you expect</li><li >remove explicit definition of <a href="#openerp.models.Model.create_uid" class="internal reference" title="openerp.models.Model.create_uid"><code class="py xref py-attr">create_uid</code></a>,
<a href="#openerp.models.Model.create_date" class="internal reference" title="openerp.models.Model.create_date"><code class="py xref py-attr">create_date</code></a>,
<a href="#openerp.models.Model.write_uid" class="internal reference" title="openerp.models.Model.write_uid"><code class="py xref py-attr">write_uid</code></a> and
<a href="#openerp.models.Model.write_date" class="internal reference" title="openerp.models.Model.write_date"><code class="py xref py-attr">write_date</code></a> fields: they are now created as
regular &quot;legitimate&quot; fields, and can be read and written like any other
field out-of-the-box</li><li ><p >when straight conversion is impossible (semantics can not be bridged) or the
&quot;old API&quot; version is not desirable and could be improved for the new API, it
is possible to use completely different &quot;old API&quot; and &quot;new API&quot;
implementations for the same method name using <a href="#openerp.api.v7" class="internal reference" title="openerp.api.v7"><code class="py xref py-func">v7()</code></a> and
<a href="#openerp.api.v8" class="internal reference" title="openerp.api.v8"><code class="py xref py-func">v8()</code></a>. The method should first be defined using the
old-API style and decorated with <a href="#openerp.api.v7" class="internal reference" title="openerp.api.v7"><code class="py xref py-func">v7()</code></a>, it should then be
re-defined using the exact same name but the new-API style and decorated
with <a href="#openerp.api.v8" class="internal reference" title="openerp.api.v8"><code class="py xref py-func">v8()</code></a>. Calls from an old-API context will be
dispatched to the first implementation and calls from a new-API context will
be dispatched to the second implementation. One implementation can call (and
frequently does) call the other by switching context.</p><div role="alert" class="alert-danger alert"><p class="alert-title">Danger</p><p >using these decorators makes methods extremely difficult to
override and harder to understand and document</p></div></li><li ><p >uses of <code class="py xref py-attr">_columns</code> or
<code class="py xref py-attr">_all_columns</code> should be replaced by
<code class="py xref py-attr">_fields</code>, which provides access to instances of
new-style <a href="#openerp.fields.Field" class="internal reference" title="openerp.fields.Field"><code class="py xref py-class">openerp.fields.Field</code></a> instances (rather than old-style
<code class="py xref py-class">openerp.osv.fields._column</code>).</p><p >Non-stored computed fields created using the new API style are <em >not</em>
available in <code class="py xref py-attr">_columns</code> and can only be
inspected through <code class="py xref py-attr">_fields</code></p></li><li >reassigning <code >self</code> in a method is probably unnecessary and may break
translation introspection</li><li ><p ><code class="py xref py-class">Environment</code> objects rely on some threadlocal state,
which has to be set up before using them. It is necessary to do so using the
<code class="py py-meth xref">openerp.api.Environment.manage()</code> context manager when trying to use
the new API in contexts where it hasn't been set up yet, such as new threads
or a Python interactive environment:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openerp</span> <span class="k">import</span> <span class="n">api</span><span class="p">,</span> <span class="n">modules</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">modules</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">RegistryManager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cr</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{})</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">environments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">api</span><span class="o">.</span><span class="n">Environment</span><span class="o">.</span><span class="n">manage</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">env</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{})</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">res.partner(1,)</span>
</pre></div>
</div>
</li></ul></section><section id="automatic-bridging-of-old-api-methods"><i id="reference-orm-oldapi-bridging"></i><h3 >Automatic bridging of old API methods</h3><p >When models are initialized, all methods are automatically scanned and bridged
if they look like models declared in the old API style. This bridging makes
them transparently callable from new-API-style methods.</p><p >Methods are matched as &quot;old-API style&quot; if their second positional parameter
(after <code >self</code>) is called either <code >cr</code> or <code >cursor</code>. The system also
recognizes the third positional parameter being called <code >uid</code> or <code >user</code> and
the fourth being called <code >id</code> or <code >ids</code>. It also recognizes the presence of
any parameter called <code >context</code>.</p><p >When calling such methods from a new API context, the system will
automatically fill matched parameters from the current
<code class="py xref py-class">Environment</code> (for <code class="py xref py-attr">cr</code>,
<code class="py xref py-attr">user</code> and
<code class="py xref py-attr">context</code>) or the current recordset (for <code >id</code>
and <code >ids</code>).</p><p >In the rare cases where it is necessary, the bridging can be customized by
decorating the old-style method:</p><ul ><li >disabling it entirely, by decorating a method with
<code class="py xref py-func">noguess()</code> there will be no bridging and methods will be
called the exact same way from the new and old API styles</li><li ><p >defining the bridge explicitly, this is mostly for methods which are matched
incorrectly (because parameters are named in unexpected ways):</p><dl ><dt ><code class="py xref py-func">cr()</code></dt><dd >will automatically prepend the current cursor to explicitly provided
parameters, positionally</dd><dt ><code class="py xref py-func">cr_uid()</code></dt><dd >will automatically prepend the current cursor and user's id to explictly
provided parameters</dd><dt ><code class="py xref py-func">cr_uid_ids()</code></dt><dd >will automatically prepend the current cursor, user's id and recordset's
ids to explicitly provided parameters</dd><dt ><code class="py xref py-func">cr_uid_id()</code></dt><dd ><p >will loop over the current recordset and call the method once for each
record, prepending the current cursor, user's id and record's id to
explicitly provided parameters.</p><div role="alert" class="alert-danger alert"><p class="alert-title">Danger</p><p >the result of this wrapper is <em >always a list</em> when calling
from a new-API context</p></div></dd></dl><p >All of these methods have a <code >_context</code>-suffixed version
(e.g. <code class="py xref py-func">cr_uid_context()</code>) which also passes the current
context <em >by keyword</em>.</p></li><li >dual implementations using <a href="#openerp.api.v7" class="internal reference" title="openerp.api.v7"><code class="py xref py-func">v7()</code></a> and
<a href="#openerp.api.v8" class="internal reference" title="openerp.api.v8"><code class="py xref py-func">v8()</code></a> will be ignored as they provide their own &quot;bridging&quot;</li></ul></section>

          </article>
        </div>
        
        <div id="mask"></div>
      </main>
    </div>
  </div>

  <div class="floating_action_container">
    <a id="floating_action" class="ripple" href="#">
      <i class="mdi-action-explore"></i>
    </a>
    <div id="floating_action_menu">
      <span class="bubble"></span>
      <ul class="list-group content">
        <li class="list-group-item ripple"><a>Cras justo odio</a></li>
        <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
        <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
        <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
        <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
      </ul>
    </div>
  </div>
  <footer class="o_footer_effect">
            <div id="footer" class="container o_not_editable">
                <span class="o_logo o_logo_inverse center-block o_footer_logo"></span>
                <div class="row">
                    <div class="col-xs-12">
                        <hr>
						<p>Перевод документации при поддержке <a href="https://www.yartsev.by/" target="_blank">Ярцев и компаньоны</a> и <a href="https://www.udelta.ru" target="_blank">Udelta</a></p>
                        <hr>
                        <p>
                            <small>Odoo - это набор бизнес-приложений с открытым исходным кодом, которые охватывают все потребности вашей компании: CRM, интернет магазин, бухгалтерский учет, складской учет, POS терминал, управление проектами и т.д. <br> <br>
В то же время полноценное внедрение Odoo может быть очень простым и включать полную интеграцию с вашим предприятием.</small>
                        </p>
                    </div>
                </div>
            </div>

            <div class="o_footer_bottom o_not_editable">
                <div class="container">
                    <a class="small" href="https://www.odoo.com/page/website-builder">Website made with <span class="o_logo o_logo_inverse o_logo_15"></span></a>
                    <div class="social-links pull-right">
                        <a href="https://www.odoo.com/web/about/facebook">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="https://www.odoo.com/web/about/twitter">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="https://www.odoo.com/web/about/linkedin">
                            <i class="fa fa-linkedin"></i>
                        </a>
                        <a href="mailto:info@odoo.com">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>
        </footer><!-- Yandex.Metrika counter --> <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter44508703 = new Ya.Metrika({ id:44508703, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/44508703" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
  </body>
</html>